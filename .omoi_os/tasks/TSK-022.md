---
id: TSK-022
title: Create EmailNotificationService interface
status: pending
ticket_id: TKT-004
estimate: M
type: implementation
dependencies:
  depends_on: []
  blocks:
    - TSK-024
---

# TSK-022: Create EmailNotificationService interface

## Objective

Create the EmailNotificationService interface and abstract implementation for sending notification emails.

## Context

Email delivery allows users to receive notifications when they're not actively using the app.

## Deliverables

- [ ] `omoi_os/services/email_notification_service.py` - EmailNotificationService class

## Implementation Notes

```python
# omoi_os/services/email_notification_service.py

from abc import ABC, abstractmethod
from uuid import UUID
from typing import Optional

from omoi_os.models.notification import Notification
from omoi_os.models.user import User


class EmailNotificationService(ABC):
    """Abstract service for sending notification emails."""

    @abstractmethod
    async def send_notification_email(
        self, notification: Notification, user: User
    ) -> bool:
        """Send a notification email. Returns True if successful."""
        pass


class MockEmailNotificationService(EmailNotificationService):
    """Mock implementation for testing."""

    async def send_notification_email(
        self, notification: Notification, user: User
    ) -> bool:
        """Mock email send."""
        # Log instead of sending
        print(f"Email to {user.email}: {notification.title}")
        return True


# Concrete implementations will depend on email service selection:
# - SendGridEmailNotificationService
# - AWSEmailNotificationService
# - SupabaseEmailNotificationService
# - SMTPEmailNotificationService
```

## Acceptance Criteria

- [ ] EmailNotificationService abstract class defined
- [ ] Mock implementation for testing
- [ ] Interface designed for multiple email service implementations
- [ ] Retry logic hook defined
- [ ] Template rendering hook defined
