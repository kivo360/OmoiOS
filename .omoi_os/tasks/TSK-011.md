---
id: TSK-011
title: Implement mark as read endpoint
status: pending
ticket_id: TKT-002
estimate: S
type: implementation
dependencies:
  depends_on:
    - TSK-010
  blocks: []
---

# TSK-011: Implement mark as read endpoint

## Objective

Implement PATCH /api/v1/notifications/{id}/read endpoint to mark a notification as read.

## Context

Users need to mark notifications as read after viewing them, which updates the status and timestamp.

## Deliverables

- [ ] Update `omoi_os/api/routes/notifications.py` with mark read endpoint

## Implementation Notes

```python
@router.patch("/{notification_id}/read", response_model=NotificationResponse)
async def mark_as_read(
    notification_id: UUID,
    current_user: User = Depends(get_current_user),
    notification_service: NotificationService = Depends(get_notification_service),
):
    """Mark a notification as read."""
    success = await notification_service.mark_as_read(notification_id, current_user.id)

    if not success:
        raise HTTPException(status_code=404, detail="Notification not found")

    # Fetch updated notification
    notification = await notification_service.get_notification(notification_id)
    return NotificationResponse.model_validate(notification)
```

## Acceptance Criteria

- [ ] PATCH endpoint at /api/v1/notifications/{id}/read
- [ ] Updates notification status to "read"
- [ ] Sets read_at timestamp
- [ ] Returns 404 if notification doesn't exist or belongs to different user
- [ ] Returns updated notification
