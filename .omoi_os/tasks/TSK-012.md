---
id: TSK-012
title: Implement mark all as read endpoint
status: pending
parent_ticket: TKT-002
estimate: S
type: implementation
dependencies:
  depends_on:
    - TSK-010
  blocks: []
---

# TSK-012: Implement mark all as read endpoint

## Objective

Implement POST /api/v1/notifications/read-all endpoint to mark all unread notifications as read.

## Context

Users want to quickly clear all unread notifications with a single action.

## Deliverables

- [ ] Update `omoi_os/api/routes/notifications.py` with mark all read endpoint

## Implementation Notes

```python
from pydantic import BaseModel

class MarkAllReadResponse(BaseModel):
    count: int

@router.post("/read-all", response_model=MarkAllReadResponse)
async def mark_all_as_read(
    current_user: User = Depends(get_current_user),
    notification_service: NotificationService = Depends(get_notification_service),
):
    """Mark all unread notifications as read."""
    count = await notification_service.mark_all_as_read(current_user.id)
    return MarkAllReadResponse(count=count)
```

## Acceptance Criteria

- [ ] POST endpoint at /api/v1/notifications/read-all
- [ ] Updates all unread notifications for authenticated user
- [ ] Sets read_at timestamp on all affected notifications
- [ ] Returns count of notifications marked as read
- [ ] Uses single database transaction for atomicity
