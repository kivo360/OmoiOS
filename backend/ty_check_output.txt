error[missing-argument]: No argument provided for required parameter `api_key`
  --> config.py:82:12
   |
81 | def load_llm_settings() -> LLMSettings:
82 |     return LLMSettings()
   |            ^^^^^^^^^^^^^
   |
info: rule `missing-argument` is enabled by default

error[unresolved-import]: Cannot resolve imported module `grep_tool`
  --> main.py:34:6
   |
32 |     sys.path.append(str(PROJECT_ROOT))
33 |
34 | from grep_tool import register_grep_toolset
   |      ^^^^^^^^^
35 | from omoi_os.config import get_app_settings, load_llm_settings
   |
info: Searched in the following paths during module resolution:
info:   1. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend (first-party code)
info:   2. vendored://stdlib (stdlib typeshed stubs vendored by ty)
info:   3. /Users/kevinhill/.cache/uv/archive-v0/7K-TfEX3wTIQxRy2mUldM/lib/python3.12/site-packages (site-packages)
info:   4. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend/.venv/lib/python3.12/site-packages (site-packages)
info: make sure your Python environment is properly configured: https://docs.astral.sh/ty/modules/#python-environment
info: rule `unresolved-import` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:117:5
    |
115 |         persistence_dir=persistence_dir,
116 |     )
117 |     conversation.send_message("Write 3 facts about the current project into FACTS.txt.")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
118 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:118:5
    |
116 |     )
117 |     conversation.send_message("Write 3 facts about the current project into FACTS.txt.")
118 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:147:5
    |
145 |     )
146 |     console.print("Starting conversation with MCP integration...")
147 |     conversation.send_message(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
148 |         "Read https://github.com/OpenHands/OpenHands and write 3 facts about the project into FACTS.txt."
149 |     )
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:150:5
    |
148 |         "Read https://github.com/OpenHands/OpenHands and write 3 facts about the project into FACTS.txt."
149 |     )
150 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
151 |     conversation.send_message("Great! Now delete that file.")
152 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:151:5
    |
149 |     )
150 |     conversation.run()
151 |     conversation.send_message("Great! Now delete that file.")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
152 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:152:5
    |
150 |     conversation.run()
151 |     conversation.send_message("Great! Now delete that file.")
152 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:173:5
    |
171 |         persistence_dir=persistence_dir,
172 |     )
173 |     conversation.send_message(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
174 |         "Hello! Can you use the grep tool to find all files containing the word 'class' "
175 |         "in this project, then create a summary file listing them? "
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:178:5
    |
176 |         "Use the pattern 'class' to search and include only Python files with '*.py'."
177 |     )
178 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
179 |     conversation.send_message("Great! Now delete that file.")
180 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:179:5
    |
177 |     )
178 |     conversation.run()
179 |     conversation.send_message("Great! Now delete that file.")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
180 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:180:5
    |
178 |     conversation.run()
179 |     conversation.send_message("Great! Now delete that file.")
180 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:229:5
    |
227 |     console.print("=" * 100)
228 |     console.print("Checking if the repo skill is activated.")
229 |     conversation.send_message("Hey are you a grumpy cat?")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
230 |     conversation.run()
231 |     console.print("=" * 100)
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:230:5
    |
228 |     console.print("Checking if the repo skill is activated.")
229 |     conversation.send_message("Hey are you a grumpy cat?")
230 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
231 |     console.print("=" * 100)
232 |     console.print("Now sending flarglebargle to trigger the knowledge skill!")
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:233:5
    |
231 |     console.print("=" * 100)
232 |     console.print("Now sending flarglebargle to trigger the knowledge skill!")
233 |     conversation.send_message("flarglebargle!")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
234 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:234:5
    |
232 |     console.print("Now sending flarglebargle to trigger the knowledge skill!")
233 |     conversation.send_message("flarglebargle!")
234 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `state`
   --> main.py:269:15
    |
268 |     def run_until_finished(conv: Conversation) -> None:
269 |         while conv.state.execution_status != ConversationExecutionStatus.FINISHED:
    |               ^^^^^^^^^^
270 |             if (
271 |                 conv.state.execution_status
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `state`
   --> main.py:271:17
    |
269 |         while conv.state.execution_status != ConversationExecutionStatus.FINISHED:
270 |             if (
271 |                 conv.state.execution_status
    |                 ^^^^^^^^^^
272 |                 == ConversationExecutionStatus.WAITING_FOR_CONFIRMATION
273 |             ):
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `state`
   --> main.py:274:67
    |
272 |                 == ConversationExecutionStatus.WAITING_FOR_CONFIRMATION
273 |             ):
274 |                 pending = ConversationState.get_unmatched_actions(conv.state.events)
    |                                                                   ^^^^^^^^^^
275 |                 if not pending:
276 |                     raise RuntimeError(
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `reject_pending_actions`
   --> main.py:281:21
    |
279 |                 _print_action_preview(pending)
280 |                 if not non_interactive_confirmer(pending):
281 |                     conv.reject_pending_actions("Rejected by CONFIRM_ALL policy")
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
282 |                     continue
283 |             print("▶️  Running conversation.run()…")
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:284:13
    |
282 |                     continue
283 |             print("▶️  Running conversation.run()…")
284 |             conv.run()
    |             ^^^^^^^^
285 |
286 |     # 1) Confirmation mode ON
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `set_confirmation_policy`
   --> main.py:287:5
    |
286 |     # 1) Confirmation mode ON
287 |     conversation.set_confirmation_policy(AlwaysConfirm())
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
288 |     print("\n1) Command that will likely create actions…")
289 |     conversation.send_message(
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:289:5
    |
287 |     conversation.set_confirmation_policy(AlwaysConfirm())
288 |     print("\n1) Command that will likely create actions…")
289 |     conversation.send_message(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
290 |         "Please list the files in the current directory using ls -la"
291 |     )
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:296:5
    |
294 |     # 2) A command the user may choose to reject/approve
295 |     print("\n2) Command the user may choose to reject…")
296 |     conversation.send_message("Please create a file called 'dangerous_file.txt'")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
297 |     run_until_finished(conversation)
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:301:5
    |
299 |     # 3) Simple greeting (no actions expected)
300 |     print("\n3) Simple greeting (no actions expected)…")
301 |     conversation.send_message("Just say hello to me")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
302 |     run_until_finished(conversation)
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `set_confirmation_policy`
   --> main.py:306:5
    |
304 |     # 4) Disable confirmation mode and run commands directly
305 |     print("\n4) Disable confirmation mode and run a command…")
306 |     conversation.set_confirmation_policy(NeverConfirm())
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
307 |     conversation.send_message("Please echo 'Hello from confirmation mode example!'")
308 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:307:5
    |
305 |     print("\n4) Disable confirmation mode and run a command…")
306 |     conversation.set_confirmation_policy(NeverConfirm())
307 |     conversation.send_message("Please echo 'Hello from confirmation mode example!'")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
308 |     conversation.run()
309 |     conversation.send_message(
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:308:5
    |
306 |     conversation.set_confirmation_policy(NeverConfirm())
307 |     conversation.send_message("Please echo 'Hello from confirmation mode example!'")
308 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
309 |     conversation.send_message(
310 |         "Please delete any file that was created during this conversation."
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:309:5
    |
307 |     conversation.send_message("Please echo 'Hello from confirmation mode example!'")
308 |     conversation.run()
309 |     conversation.send_message(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
310 |         "Please delete any file that was created during this conversation."
311 |     )
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:312:5
    |
310 |         "Please delete any file that was created during this conversation."
311 |     )
312 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
313 |
314 |     print("\n=== Example Complete ===")
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:344:5
    |
343 |     # Quick conversation
344 |     conversation.send_message("Please echo 'Hello!'")
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
345 |     conversation.run()
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:345:5
    |
343 |     # Quick conversation
344 |     conversation.send_message("Please echo 'Hello!'")
345 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
346 |
347 |     # Show registry details and direct completion
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> main.py:381:5
    |
379 |         persistence_dir=persistence_dir,
380 |     )
381 |     conversation.send_message(
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
382 |         "Enter python interactive mode by directly running `python3`, then tell me "
383 |         "the current time, and exit python interactive mode."
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> main.py:385:5
    |
383 |         "the current time, and exit python interactive mode."
384 |     )
385 |     conversation.run()
    |     ^^^^^^^^^^^^^^^^
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Module `sqlalchemy.dialects.postgresql` has no member `VECTOR`
   --> migrations/003_intelligent_monitoring_enhancements.py:123:32
    |
121 |         sa.Column('entity_type', sa.String(length=32), nullable=False),
122 |         sa.Column('entity_id', sa.UUID(), nullable=False),
123 |         sa.Column('embedding', postgresql.VECTOR(1536), nullable=False),
    |                                ^^^^^^^^^^^^^^^^^
124 |         sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=False),
125 |         sa.PrimaryKeyConstraint('id'),
    |
info: rule `unresolved-attribute` is enabled by default

error[invalid-argument-type]: Argument to function `add_column` is incorrect
   --> migrations/003_intelligent_monitoring_enhancements.py:150:29
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
    |                             ^^^^^^^^^^^^^^^ Expected `Column[Any]`, found `Literal["anomaly_score"]`
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |
info: Function defined here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 | ### end imports ###
61 |
62 | def add_column(
   |     ^^^^^^^^^^
63 |     table_name: str,
64 |     column: Column[Any],
   |     ------------------- Parameter declared here
65 |     *,
66 |     schema: Optional[str] = None,
   |
info: rule `invalid-argument-type` is enabled by default

error[too-many-positional-arguments]: Too many positional arguments to function `add_column`: expected 2, got 3
   --> migrations/003_intelligent_monitoring_enhancements.py:150:46
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
    |                                              ^^^^^^^^^^
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `too-many-positional-arguments` is enabled by default

error[unknown-argument]: Argument `nullable` does not match any known parameter of function `add_column`
   --> migrations/003_intelligent_monitoring_enhancements.py:150:58
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
    |                                                          ^^^^^^^^^^^^^
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `default` does not match any known parameter of function `add_column`
   --> migrations/003_intelligent_monitoring_enhancements.py:150:73
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
    |                                                                         ^^^^^^^^^^^
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `unknown-argument` is enabled by default

error[invalid-argument-type]: Argument to function `add_column` is incorrect
   --> migrations/003_intelligent_monitoring_enhancements.py:151:29
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `Column[Any]`, found `Literal["consecutive_anomalous_readings"]`
152 |
153 |     # Add monitoring fields to tasks table
    |
info: Function defined here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 | ### end imports ###
61 |
62 | def add_column(
   |     ^^^^^^^^^^
63 |     table_name: str,
64 |     column: Column[Any],
   |     ------------------- Parameter declared here
65 |     *,
66 |     schema: Optional[str] = None,
   |
info: rule `invalid-argument-type` is enabled by default

error[too-many-positional-arguments]: Too many positional arguments to function `add_column`: expected 2, got 3
   --> migrations/003_intelligent_monitoring_enhancements.py:151:63
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |                                                               ^^^^^^^^^^^^
152 |
153 |     # Add monitoring fields to tasks table
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `too-many-positional-arguments` is enabled by default

error[unknown-argument]: Argument `nullable` does not match any known parameter of function `add_column`
   --> migrations/003_intelligent_monitoring_enhancements.py:151:77
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |                                                                             ^^^^^^^^^^^^^
152 |
153 |     # Add monitoring fields to tasks table
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `default` does not match any known parameter of function `add_column`
   --> migrations/003_intelligent_monitoring_enhancements.py:151:92
    |
149 |     # Add monitoring configuration to agents table
150 |     op.add_column('agents', 'anomaly_score', sa.Float(), nullable=True, default=0.0)
151 |     op.add_column('agents', 'consecutive_anomalous_readings', sa.Integer(), nullable=True, default=0)
    |                                                                                            ^^^^^^^^^
152 |
153 |     # Add monitoring fields to tasks table
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `unknown-argument` is enabled by default

error[invalid-argument-type]: Argument to function `add_column` is incorrect
   --> migrations/003_intelligent_monitoring_enhancements.py:154:28
    |
153 |     # Add monitoring fields to tasks table
154 |     op.add_column('tasks', 'monitoring_notes', sa.Text(), nullable=True)
    |                            ^^^^^^^^^^^^^^^^^^ Expected `Column[Any]`, found `Literal["monitoring_notes"]`
155 |     op.add_column('tasks', 'discovery_impact', sa.String(length=32), nullable=True)
    |
info: Function defined here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 | ### end imports ###
61 |
62 | def add_column(
   |     ^^^^^^^^^^
63 |     table_name: str,
64 |     column: Column[Any],
   |     ------------------- Parameter declared here
65 |     *,
66 |     schema: Optional[str] = None,
   |
info: rule `invalid-argument-type` is enabled by default

error[too-many-positional-arguments]: Too many positional arguments to function `add_column`: expected 2, got 3
   --> migrations/003_intelligent_monitoring_enhancements.py:154:48
    |
153 |     # Add monitoring fields to tasks table
154 |     op.add_column('tasks', 'monitoring_notes', sa.Text(), nullable=True)
    |                                                ^^^^^^^^^
155 |     op.add_column('tasks', 'discovery_impact', sa.String(length=32), nullable=True)
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `too-many-positional-arguments` is enabled by default

error[unknown-argument]: Argument `nullable` does not match any known parameter of function `add_column`
   --> migrations/003_intelligent_monitoring_enhancements.py:154:59
    |
153 |     # Add monitoring fields to tasks table
154 |     op.add_column('tasks', 'monitoring_notes', sa.Text(), nullable=True)
    |                                                           ^^^^^^^^^^^^^
155 |     op.add_column('tasks', 'discovery_impact', sa.String(length=32), nullable=True)
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `unknown-argument` is enabled by default

error[invalid-argument-type]: Argument to function `add_column` is incorrect
   --> migrations/003_intelligent_monitoring_enhancements.py:155:28
    |
153 |     # Add monitoring fields to tasks table
154 |     op.add_column('tasks', 'monitoring_notes', sa.Text(), nullable=True)
155 |     op.add_column('tasks', 'discovery_impact', sa.String(length=32), nullable=True)
    |                            ^^^^^^^^^^^^^^^^^^ Expected `Column[Any]`, found `Literal["discovery_impact"]`
    |
info: Function defined here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 | ### end imports ###
61 |
62 | def add_column(
   |     ^^^^^^^^^^
63 |     table_name: str,
64 |     column: Column[Any],
   |     ------------------- Parameter declared here
65 |     *,
66 |     schema: Optional[str] = None,
   |
info: rule `invalid-argument-type` is enabled by default

error[too-many-positional-arguments]: Too many positional arguments to function `add_column`: expected 2, got 3
   --> migrations/003_intelligent_monitoring_enhancements.py:155:48
    |
153 |     # Add monitoring fields to tasks table
154 |     op.add_column('tasks', 'monitoring_notes', sa.Text(), nullable=True)
155 |     op.add_column('tasks', 'discovery_impact', sa.String(length=32), nullable=True)
    |                                                ^^^^^^^^^^^^^^^^^^^^
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `too-many-positional-arguments` is enabled by default

error[unknown-argument]: Argument `nullable` does not match any known parameter of function `add_column`
   --> migrations/003_intelligent_monitoring_enhancements.py:155:70
    |
153 |     # Add monitoring fields to tasks table
154 |     op.add_column('tasks', 'monitoring_notes', sa.Text(), nullable=True)
155 |     op.add_column('tasks', 'discovery_impact', sa.String(length=32), nullable=True)
    |                                                                      ^^^^^^^^^^^^^
    |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/alembic/op.pyi:62:5
   |
60 |   ### end imports ###
61 |
62 |   def add_column(
   |  _____^
63 | |     table_name: str,
64 | |     column: Column[Any],
65 | |     *,
66 | |     schema: Optional[str] = None,
67 | |     if_not_exists: Optional[bool] = None,
68 | | ) -> None:
   | |_________^
69 |       """Issue an "add column" instruction using the current
70 |       migration context.
   |
info: rule `unknown-argument` is enabled by default

error[invalid-argument-type]: Argument to function `engine_from_config` is incorrect
  --> migrations/env.py:50:9
   |
48 | def run_migrations_online() -> None:
49 |     connectable = engine_from_config(
50 |         config.get_section(config.config_ini_section),
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `dict[str, Any]`, found `dict[str, str] | None`
51 |         prefix="sqlalchemy.",
52 |         poolclass=pool.NullPool,
   |
info: Element `None` of this union is not assignable to `dict[str, Any]`
info: Function defined here
   --> .venv/lib/python3.12/site-packages/sqlalchemy/engine/create.py:796:5
    |
796 | def engine_from_config(
    |     ^^^^^^^^^^^^^^^^^^
797 |     configuration: Dict[str, Any], prefix: str = "sqlalchemy.", **kwargs: Any
    |     ----------------------------- Parameter declared here
798 | ) -> Engine:
799 |     """Create a new Engine instance using a configuration dictionary.
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-assignment]: Object of type `None` is not assignable to `Sequence[str]`
  --> migrations/versions/012_anomaly_detection.py:17:16
   |
15 | revision: str = "012_anomaly_detection"
16 | down_revision: Union[str, None] = "011_enhanced_heartbeat"
17 | branch_labels: Union[str, Sequence[str]] = None
   |                -------------------------   ^^^^ Incompatible value of type `None`
   |                |
   |                Declared type
18 | depends_on: Union[str, Sequence[str]] = None
   |
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Object of type `None` is not assignable to `Sequence[str]`
  --> migrations/versions/012_anomaly_detection.py:18:13
   |
16 | down_revision: Union[str, None] = "011_enhanced_heartbeat"
17 | branch_labels: Union[str, Sequence[str]] = None
18 | depends_on: Union[str, Sequence[str]] = None
   |             -------------------------   ^^^^ Incompatible value of type `None`
   |             |
   |             Declared type
   |
info: rule `invalid-assignment` is enabled by default

error[unresolved-import]: Cannot resolve imported module `migration_utils`
  --> migrations/versions/030_auth_system_foundation.py:18:6
   |
16 | from pathlib import Path
17 | sys.path.append(str(Path(__file__).parent.parent))
18 | from migration_utils import (
   |      ^^^^^^^^^^^^^^^
19 |     safe_create_table,
20 |     safe_add_column,
   |
info: Searched in the following paths during module resolution:
info:   1. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend (first-party code)
info:   2. vendored://stdlib (stdlib typeshed stubs vendored by ty)
info:   3. /Users/kevinhill/.cache/uv/archive-v0/7K-TfEX3wTIQxRy2mUldM/lib/python3.12/site-packages (site-packages)
info:   4. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend/.venv/lib/python3.12/site-packages (site-packages)
info: make sure your Python environment is properly configured: https://docs.astral.sh/ty/modules/#python-environment
info: rule `unresolved-import` is enabled by default

error[unresolved-import]: Cannot resolve imported module `migration_utils`
  --> migrations/versions/031_workspace_isolation_system.py:17:6
   |
16 | sys.path.append(str(Path(__file__).parent.parent))
17 | from migration_utils import (
   |      ^^^^^^^^^^^^^^^
18 |     safe_create_table,
19 |     safe_create_index,
   |
info: Searched in the following paths during module resolution:
info:   1. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend (first-party code)
info:   2. vendored://stdlib (stdlib typeshed stubs vendored by ty)
info:   3. /Users/kevinhill/.cache/uv/archive-v0/7K-TfEX3wTIQxRy2mUldM/lib/python3.12/site-packages (site-packages)
info:   4. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend/.venv/lib/python3.12/site-packages (site-packages)
info: make sure your Python environment is properly configured: https://docs.astral.sh/ty/modules/#python-environment
info: rule `unresolved-import` is enabled by default

error[unresolved-attribute]: Module `sqlalchemy.dialects.postgresql` has no member `VECTOR`
   --> migrations/versions/7b9a14289450_add_missing_intelligent_monitoring_.py:192:36
    |
190 |             sa.Column("entity_type", sa.String(length=32), nullable=False),
191 |             sa.Column("entity_id", sa.UUID(), nullable=False),
192 |             sa.Column("embedding", postgresql.VECTOR(1536), nullable=False),
    |                                    ^^^^^^^^^^^^^^^^^
193 |             sa.Column(
194 |                 "created_at",
    |
info: rule `unresolved-attribute` is enabled by default

error[invalid-parameter-default]: Default value of type `None` is not assignable to annotated parameter type `DatabaseService`
   --> omoi_os/api/dependencies.py:234:5
    |
232 |     credentials: "HTTPAuthorizationCredentials",
233 |     supabase_auth=None,
234 |     db: "DatabaseService" = None,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
235 | ):
236 |     """
    |
info: rule `invalid-parameter-default` is enabled by default

error[invalid-parameter-default]: Default value of type `None` is not assignable to annotated parameter type `DatabaseService`
   --> omoi_os/api/dependencies.py:285:5
    |
283 |     credentials: Optional["HTTPAuthorizationCredentials"] = None,
284 |     supabase_auth=None,
285 |     db: "DatabaseService" = None,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
286 | ):
287 |     """
    |
info: rule `invalid-parameter-default` is enabled by default

error[unresolved-attribute]: Object of type `User` has no attribute `role`
   --> omoi_os/api/dependencies.py:331:12
    |
330 |     def role_checker(current_user: User = Depends(get_current_user)) -> User:
331 |         if current_user.role not in allowed_roles:
    |            ^^^^^^^^^^^^^^^^^
332 |             raise HTTPException(
333 |                 status_code=status.HTTP_403_FORBIDDEN,
    |
info: rule `unresolved-attribute` is enabled by default

error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
   --> omoi_os/api/main.py:157:9
    |
155 |     restart_orchestrator = RestartOrchestrator(
156 |         db=db,
157 |         agent_registry=registry_service,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `AgentRegistryService`, found `AgentRegistryService | None`
158 |         task_queue=queue,
159 |         event_bus=event_bus,
    |
info: Element `None` of this union is not assignable to `AgentRegistryService`
info: Method defined here
  --> omoi_os/services/restart_orchestrator.py:34:9
   |
32 |     RESTART_COOLDOWN = timedelta(seconds=60)  # per REQ-FT-AR-003
33 |
34 |     def __init__(
   |         ^^^^^^^^
35 |         self,
36 |         db: DatabaseService,
37 |         agent_registry: AgentRegistryService,
   |         ------------------------------------ Parameter declared here
38 |         task_queue: TaskQueueService,
39 |         event_bus: Optional[EventBusService] = None,
   |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
   --> omoi_os/api/main.py:158:9
    |
156 |         db=db,
157 |         agent_registry=registry_service,
158 |         task_queue=queue,
    |         ^^^^^^^^^^^^^^^^ Expected `TaskQueueService`, found `TaskQueueService | None`
159 |         event_bus=event_bus,
160 |         status_manager=agent_status_manager,
    |
info: Element `None` of this union is not assignable to `TaskQueueService`
info: Method defined here
  --> omoi_os/services/restart_orchestrator.py:34:9
   |
32 |     RESTART_COOLDOWN = timedelta(seconds=60)  # per REQ-FT-AR-003
33 |
34 |     def __init__(
   |         ^^^^^^^^
35 |         self,
36 |         db: DatabaseService,
37 |         agent_registry: AgentRegistryService,
38 |         task_queue: TaskQueueService,
   |         ---------------------------- Parameter declared here
39 |         event_bus: Optional[EventBusService] = None,
40 |         status_manager: Optional[AgentStatusManager] = None,
   |
info: rule `invalid-argument-type` is enabled by default

error[unresolved-attribute]: Object of type `None` has no attribute `detect_blocking`
   --> omoi_os/api/main.py:320:23
    |
318 |         try:
319 |             # Detect blocking tickets
320 |             results = ticket_workflow_orchestrator.detect_blocking()
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
321 |
322 |             # Mark tickets as blocked
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `None` has no attribute `mark_blocked`
   --> omoi_os/api/main.py:331:21
    |
329 |                     )
330 |
331 |                     ticket_workflow_orchestrator.mark_blocked(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
332 |                         result["ticket_id"],
333 |                         result["blocker_type"],
    |
info: rule `unresolved-attribute` is enabled by default

error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
   --> omoi_os/api/main.py:535:9
    |
533 |         discovery=discovery_service,
534 |         memory=memory_service,
535 |         monitor=monitor_service,
    |         ^^^^^^^^^^^^^^^^^^^^^^^ Expected `MonitorService`, found `MonitorService | None`
536 |         event_bus=event_bus,
537 |     )
    |
info: Element `None` of this union is not assignable to `MonitorService`
info: Method defined here
  --> omoi_os/services/diagnostic.py:36:9
   |
34 |     """
35 |
36 |     def __init__(
   |         ^^^^^^^^
37 |         self,
38 |         db: DatabaseService,
39 |         discovery: "DiscoveryService",
40 |         memory: "MemoryService",
41 |         monitor: "MonitorService",
   |         ------------------------- Parameter declared here
42 |         event_bus: Optional[EventBusService] = None,
43 |     ):
   |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to bound method `add_middleware` is incorrect
   --> omoi_os/api/main.py:692:5
    |
690 | # Add CORS middleware
691 | app.add_middleware(
692 |     CORSMiddleware,
    |     ^^^^^^^^^^^^^^ Expected `_MiddlewareFactory[Unknown]`, found `<class 'CORSMiddleware'>`
693 |     allow_origins=["*"],  # In production, specify actual origins
694 |     allow_credentials=True,
    |
info: Method defined here
   --> .venv/lib/python3.12/site-packages/starlette/applications.py:124:9
    |
122 |         self.router.host(host, app=app, name=name)  # pragma: no cover
123 |
124 |     def add_middleware(
    |         ^^^^^^^^^^^^^^
125 |         self,
126 |         middleware_class: _MiddlewareFactory[P],
    |         --------------------------------------- Parameter declared here
127 |         *args: P.args,
128 |         **kwargs: P.kwargs,
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to bound method `verify_password` is incorrect
   --> omoi_os/api/routes/auth.py:280:67
    |
278 |     """Change password for authenticated user."""
279 |     # Verify current password
280 |     if not auth_service.verify_password(request.current_password, current_user.hashed_password):
    |                                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
281 |         raise HTTPException(
282 |             status_code=status.HTTP_400_BAD_REQUEST,
    |
info: Element `None` of this union is not assignable to `str`
info: Method defined here
  --> omoi_os/services/auth_service.py:51:9
   |
49 |         return pwd_context.hash(password)
50 |
51 |     def verify_password(self, plain_password: str, hashed_password: str) -> bool:
   |         ^^^^^^^^^^^^^^^                            -------------------- Parameter declared here
52 |         """Verify password against hash."""
53 |         return pwd_context.verify(plain_password, hashed_password)
   |
info: rule `invalid-argument-type` is enabled by default

error[unresolved-import]: Module `omoi_os.models.event` has no member `SystemEvent`
   --> omoi_os/api/routes/commits.py:260:42
    |
259 |         # Emit event
260 |         from omoi_os.models.event import SystemEvent
    |                                          ^^^^^^^^^^^
261 |         
262 |         event_bus.publish(
    |
info: rule `unresolved-import` is enabled by default

error[missing-argument]: No argument provided for required parameter `embedding_service` of bound method `__init__`
  --> omoi_os/api/routes/diagnostic.py:97:14
   |
95 |     # Initialize required services
96 |     embedding = EmbeddingService()
97 |     memory = MemoryService(db=db, embedding=embedding, event_bus=event_bus)
   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
98 |     discovery = DiscoveryService(event_bus=event_bus)
99 |     monitor = MonitorService(db=db, event_bus=event_bus)
   |
info: Parameter declared here
  --> omoi_os/services/memory.py:48:9
   |
46 |     def __init__(
47 |         self,
48 |         embedding_service: EmbeddingService,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
49 |         event_bus: Optional[EventBusService] = None,
50 |     ):
   |
info: rule `missing-argument` is enabled by default

error[unknown-argument]: Argument `db` does not match any known parameter of bound method `__init__`
  --> omoi_os/api/routes/diagnostic.py:97:28
   |
95 |     # Initialize required services
96 |     embedding = EmbeddingService()
97 |     memory = MemoryService(db=db, embedding=embedding, event_bus=event_bus)
   |                            ^^^^^
98 |     discovery = DiscoveryService(event_bus=event_bus)
99 |     monitor = MonitorService(db=db, event_bus=event_bus)
   |
info: Method signature here
  --> omoi_os/services/memory.py:46:9
   |
44 |       """
45 |
46 |       def __init__(
   |  _________^
47 | |         self,
48 | |         embedding_service: EmbeddingService,
49 | |         event_bus: Optional[EventBusService] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize memory service.
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `embedding` does not match any known parameter of bound method `__init__`
  --> omoi_os/api/routes/diagnostic.py:97:35
   |
95 |     # Initialize required services
96 |     embedding = EmbeddingService()
97 |     memory = MemoryService(db=db, embedding=embedding, event_bus=event_bus)
   |                                   ^^^^^^^^^^^^^^^^^^^
98 |     discovery = DiscoveryService(event_bus=event_bus)
99 |     monitor = MonitorService(db=db, event_bus=event_bus)
   |
info: Method signature here
  --> omoi_os/services/memory.py:46:9
   |
44 |       """
45 |
46 |       def __init__(
   |  _________^
47 | |         self,
48 | |         embedding_service: EmbeddingService,
49 | |         event_bus: Optional[EventBusService] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize memory service.
   |
info: rule `unknown-argument` is enabled by default

warning[possibly-missing-attribute]: Attribute `psubscribe` may be missing on object of type `Unknown | None`
  --> omoi_os/api/routes/events.py:58:13
   |
57 |         def subscribe():
58 |             self.redis_pubsub.psubscribe("events.*")
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
59 |
60 |         await loop.run_in_executor(None, subscribe)
   |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `get_message` may be missing on object of type `Unknown | None`
  --> omoi_os/api/routes/events.py:67:29
   |
65 |                 message = await loop.run_in_executor(
66 |                     None,
67 |                     lambda: self.redis_pubsub.get_message(
   |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
68 |                         ignore_subscribe_messages=True, timeout=1.0
69 |                     ),
   |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `close` may be missing on object of type `Unknown | None`
  --> omoi_os/api/routes/events.py:96:21
   |
95 |                 def close():
96 |                     self.redis_pubsub.close()
   |                     ^^^^^^^^^^^^^^^^^^^^^^^
97 |
98 |                 await loop.run_in_executor(None, close)
   |
info: rule `possibly-missing-attribute` is enabled by default

error[unresolved-import]: Module `omoi_os.models.event` has no member `SystemEvent`
   --> omoi_os/api/routes/projects.py:123:42
    |
122 |         # Emit event
123 |         from omoi_os.models.event import SystemEvent
    |                                          ^^^^^^^^^^^
124 |         
125 |         event_bus.publish(
    |
info: rule `unresolved-import` is enabled by default

error[unresolved-import]: Module `omoi_os.models.event` has no member `SystemEvent`
   --> omoi_os/api/routes/projects.py:251:42
    |
250 |         # Emit event
251 |         from omoi_os.models.event import SystemEvent
    |                                          ^^^^^^^^^^^
252 |         
253 |         event_bus.publish(
    |
info: rule `unresolved-import` is enabled by default

error[unresolved-import]: Module `omoi_os.models.event` has no member `SystemEvent`
   --> omoi_os/api/routes/projects.py:294:42
    |
293 |         # Emit event
294 |         from omoi_os.models.event import SystemEvent
    |                                          ^^^^^^^^^^^
295 |         
296 |         event_bus.publish(
    |
info: rule `unresolved-import` is enabled by default

error[invalid-argument-type]: Argument expression after ** must be a mapping type
   --> omoi_os/api/routes/quality.py:127:42
    |
125 |         )
126 |         db.commit()  # Commit any reuse counter updates
127 |         return QualityPredictionResponse(**prediction)
    |                                          ^^^^^^^^^^^^ Found `CoroutineType[Any, Any, QualityPrediction]`
128 |     except Exception as e:
129 |         db.rollback()
    |
info: rule `invalid-argument-type` is enabled by default

error[unresolved-import]: Module `omoi_os.services.database` has no member `get_database_service`
   --> omoi_os/api/routes/watchdog.py:131:43
    |
130 |     # Count healthy vs unhealthy
131 |     from omoi_os.services.database import get_database_service
    |                                           ^^^^^^^^^^^^^^^^^^^^
132 |     from omoi_os.models.agent import Agent
133 |     from omoi_os.models.agent_status import AgentStatus
    |
info: rule `unresolved-import` is enabled by default

error[invalid-assignment]: Object of type `None` is not assignable to `<module 'yaml'>`
  --> omoi_os/config.py:21:5
   |
19 |     import yaml
20 | except ImportError:  # pragma: no cover
21 |     yaml = None
   |     ----   ^^^^ Incompatible value of type `None`
   |     |
   |     Declared type `<module 'yaml'>`
   |
info: rule `invalid-assignment` is enabled by default

error[invalid-argument-type]: Argument to function `len` is incorrect
   --> omoi_os/mcp/fastmcp_server.py:247:31
    |
245 |             result = {"success": True, "mode": "hybrid", **data}
246 |         
247 |         ctx.info(f"Found {len(result.get('tickets', []))} tickets matching '{query}'")
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `Sized`, found `Unknown | bool | str`
248 |         return result
    |
info: Element `bool` of this union is not assignable to `Sized`
info: Function defined here
    --> stdlib/builtins.pyi:3757:5
     |
3755 |     """
3756 |
3757 | def len(obj: Sized, /) -> int:
     |     ^^^ ---------- Parameter declared here
3758 |     """Return the number of items in a container."""
     |
info: rule `invalid-argument-type` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/mcp/fastmcp_server.py:488:38
    |
486 |                     "description": d.description,
487 |                     "spawned_task_ids": d.spawned_task_ids,
488 |                     "discovered_at": d.discovered_at.isoformat() if d.discovered_at else None,
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^
489 |                     "resolution_status": d.resolution_status,
490 |                     "priority_boost": d.priority_boost,
    |
info: rule `unresolved-attribute` is enabled by default

error[invalid-assignment]: Invalid assignment to data descriptor attribute `updated_at` on type `Self@increment_usage` with custom `__set__` method
   --> omoi_os/models/learned_pattern.py:128:9
    |
126 |         """Increment usage counter when this pattern is applied."""
127 |         self.usage_count += 1
128 |         self.updated_at = utc_now()
    |         ^^^^^^^^^^^^^^^
129 |
130 |     def update_confidence(self, new_score: float) -> None:
    |
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Invalid assignment to data descriptor attribute `updated_at` on type `Self@update_confidence` with custom `__set__` method
   --> omoi_os/models/learned_pattern.py:137:9
    |
135 |             )
136 |         self.confidence_score = new_score
137 |         self.updated_at = utc_now()
    |         ^^^^^^^^^^^^^^^
138 |
139 |     def to_dict(self) -> Dict[str, Any]:
    |
info: rule `invalid-assignment` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/models/learned_pattern.py:151:27
    |
149 |             "confidence_score": self.confidence_score,
150 |             "usage_count": self.usage_count,
151 |             "created_at": self.created_at.isoformat() if self.created_at else None,
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^
152 |             "updated_at": self.updated_at.isoformat() if self.updated_at else None,
153 |         }
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/models/learned_pattern.py:152:27
    |
150 |             "usage_count": self.usage_count,
151 |             "created_at": self.created_at.isoformat() if self.created_at else None,
152 |             "updated_at": self.updated_at.isoformat() if self.updated_at else None,
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^
153 |         }
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/models/playbook_change.py:108:27
    |
106 |             "reason": self.reason,
107 |             "related_memory_id": self.related_memory_id,
108 |             "changed_at": self.changed_at.isoformat() if self.changed_at else None,
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^
109 |             "changed_by": self.changed_by,
110 |         }
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/models/playbook_entry.py:128:27
    |
126 |                 len(self.embedding) if self.embedding else 0
127 |             ),
128 |             "created_at": self.created_at.isoformat() if self.created_at else None,
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^
129 |             "created_by": self.created_by,
130 |             "updated_at": self.updated_at.isoformat() if self.updated_at else None,
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/models/playbook_entry.py:130:27
    |
128 |             "created_at": self.created_at.isoformat() if self.created_at else None,
129 |             "created_by": self.created_by,
130 |             "updated_at": self.updated_at.isoformat() if self.updated_at else None,
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^
131 |             "is_active": self.is_active,
132 |         }
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
  --> omoi_os/models/quality_metric.py:88:28
   |
86 |             "threshold": self.threshold,
87 |             "passed": self.passed,
88 |             "measured_at": self.measured_at.isoformat() if self.measured_at else None,
   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^
89 |             "metadata": self.measurement_metadata or {},
90 |         }
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/models/task_discovery.py:120:30
    |
118 |             "spawned_task_ids": self.spawned_task_ids,
119 |             "spawned_count": len(self.spawned_task_ids),
120 |             "discovered_at": self.discovered_at.isoformat()
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
121 |             if self.discovered_at
122 |             else None,
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/models/task_memory.py:122:27
    |
120 |             "success": self.success,
121 |             "error_patterns": self.error_patterns,
122 |             "learned_at": self.learned_at.isoformat() if self.learned_at else None,
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^
123 |             "reused_count": self.reused_count,
124 |         }
    |
info: rule `unresolved-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
  --> omoi_os/models/trajectory_analysis.py:32:59
   |
30 |     source: str = Field(..., description="Source of the constraint")
31 |     strength: float = Field(default=1.0, description="Strength of the constraint (0-1)")
32 |     created_at: datetime = Field(default_factory=datetime.utcnow)
   |                                                           ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
   |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
  --> omoi_os/models/trajectory_analysis.py:46:61
   |
44 |     conversation_events: List[ConversationEvent] = Field(default_factory=list)
45 |     task_completion_rate: float = Field(default=0.0)
46 |     last_updated: datetime = Field(default_factory=datetime.utcnow)
   |                                                             ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
   |
info: rule `deprecated` is enabled by default

error[invalid-argument-type]: Argument to bound method `validate_delta` is incorrect
   --> omoi_os/services/ace_curator.py:151:43
    |
150 |         # Validate delta (REQ-MEM-ACE-003)
151 |         if not self.validate_delta(delta, current_playbook):
    |                                           ^^^^^^^^^^^^^^^^ Expected `list[PlaybookEntry]`, found `Sequence[Unknown]`
152 |             return CuratorResult(
153 |                 playbook_delta=PlaybookDelta(operations=[], summary="No valid updates"),
    |
info: Method defined here
   --> omoi_os/services/ace_curator.py:264:9
    |
262 |         return None
263 |     
264 |     def validate_delta(
    |         ^^^^^^^^^^^^^^
265 |         self,
266 |         delta: PlaybookDelta,
267 |         current_playbook: List[PlaybookEntry],
    |         ------------------------------------- Parameter declared here
268 |     ) -> bool:
269 |         """
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/ace_executor.py:137:13
    |
135 |         return ExecutorResult(
136 |             memory_id=memory.id,
137 |             memory_type=memory_type,
    |             ^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `Unknown | CoroutineType[Any, Any, str]`
138 |             files_linked=files_linked,
139 |             tags=tags,
    |
info: Element `CoroutineType[Any, Any, str]` of this union is not assignable to `str`
info: rule `invalid-argument-type` is enabled by default

error[unknown-argument]: Argument `agent_context` does not match any known parameter of function `get_default_agent`
  --> omoi_os/services/agent_executor.py:83:13
   |
81 |             llm=self.llm,
82 |             cli_mode=True,
83 |             agent_context=agent_context,
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
84 |             mcp_config=mcp_config,
85 |         )
   |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/openhands/tools/preset/default.py:70:5
   |
70 |   def get_default_agent(
   |  _____^
71 | |     llm: LLM,
72 | |     cli_mode: bool = False,
73 | |     add_security_analyzer: bool = False,
74 | | ) -> Agent:
   | |__________^
75 |       tools = get_default_tools(
76 |           # Disable browser tools in CLI mode
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `mcp_config` does not match any known parameter of function `get_default_agent`
  --> omoi_os/services/agent_executor.py:84:13
   |
82 |             cli_mode=True,
83 |             agent_context=agent_context,
84 |             mcp_config=mcp_config,
   |             ^^^^^^^^^^^^^^^^^^^^^
85 |         )
86 |         self.phase_instructions = phase_instructions
   |
info: Function signature here
  --> .venv/lib/python3.12/site-packages/openhands/tools/preset/default.py:70:5
   |
70 |   def get_default_agent(
   |  _____^
71 | |     llm: LLM,
72 | |     cli_mode: bool = False,
73 | |     add_security_analyzer: bool = False,
74 | | ) -> Agent:
   | |__________^
75 |       tools = get_default_tools(
76 |           # Disable browser tools in CLI mode
   |
info: rule `unknown-argument` is enabled by default

error[invalid-argument-type]: Argument to function `__new__` is incorrect
   --> omoi_os/services/agent_executor.py:117:13
    |
115 |             workspace=self.workspace_dir,
116 |             persistence_dir=persistence_dir,
117 |             conversation_id=conversation_id,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `UUID | None`, found `str | None`
118 |         )
    |
info: Element `str` of this union is not assignable to `UUID | None`
info: Matching overload defined here
  --> .venv/lib/python3.12/site-packages/openhands/sdk/conversation/conversation.py:43:9
   |
42 |     @overload
43 |     def __new__(
   |         ^^^^^^^
44 |         cls: type[Self],
45 |         agent: AgentBase,
   |
  ::: .venv/lib/python3.12/site-packages/openhands/sdk/conversation/conversation.py:49:9
   |
47 |         workspace: str | LocalWorkspace = "workspace/project",
48 |         persistence_dir: str | None = None,
49 |         conversation_id: ConversationID | None = None,
   |         --------------------------------------------- Parameter declared here
50 |         callbacks: list[ConversationCallbackType] | None = None,
51 |         max_iteration_per_run: int = 500,
   |
info: Non-matching overloads for function `__new__`:
info:   (cls: @Todo, agent: AgentBase, *, workspace: RemoteWorkspace, conversation_id: UUID | None = None, callbacks: list[(Event, /) -> None] | None = None, max_iteration_per_run: int = Literal[500], stuck_detection: bool = Literal[True], visualizer: type[ConversationVisualizerBase] | ConversationVisualizerBase | None = <class 'DefaultConversationVisualizer'>, secrets: dict[str, str | SecretSource] | dict[str, str] | None = None) -> RemoteConversation
info: rule `invalid-argument-type` is enabled by default

error[invalid-return-type]: Return type does not match returned value
   --> omoi_os/services/agent_executor.py:120:16
    |
118 |           )
119 |
120 |           return {
    |  ________________^
121 | |             "conversation_id": conversation.state.id,
122 | |             "persistence_dir": persistence_dir,
123 | |             "_conversation": conversation,  # Internal: store for execute_task
124 | |         }
    | |_________^ expected `dict[str, str]`, found `dict[str, str | Conversation]`
125 |
126 |       def execute_task(
    |
   ::: omoi_os/services/agent_executor.py:88:67
    |
 86 |           self.phase_instructions = phase_instructions
 87 |
 88 |       def prepare_conversation(self, task_id: str | None = None) -> Dict[str, str]:
    |                                                                     -------------- Expected `dict[str, str]` because of return type
 89 |           """
 90 |           Prepare conversation with persistence and return metadata.
    |
info: rule `invalid-return-type` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `state`
   --> omoi_os/services/agent_executor.py:121:32
    |
120 |         return {
121 |             "conversation_id": conversation.state.id,
    |                                ^^^^^^^^^^^^^^^^^^
122 |             "persistence_dir": persistence_dir,
123 |             "_conversation": conversation,  # Internal: store for execute_task
    |
info: rule `unresolved-attribute` is enabled by default

error[invalid-argument-type]: Argument to function `__new__` is incorrect
   --> omoi_os/services/agent_executor.py:168:17
    |
166 |                 workspace=self.workspace_dir,
167 |                 persistence_dir=persistence_dir,
168 |                 conversation_id=conversation_id,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `UUID | None`, found `str | None`
169 |             )
    |
info: Element `str` of this union is not assignable to `UUID | None`
info: Matching overload defined here
  --> .venv/lib/python3.12/site-packages/openhands/sdk/conversation/conversation.py:43:9
   |
42 |     @overload
43 |     def __new__(
   |         ^^^^^^^
44 |         cls: type[Self],
45 |         agent: AgentBase,
   |
  ::: .venv/lib/python3.12/site-packages/openhands/sdk/conversation/conversation.py:49:9
   |
47 |         workspace: str | LocalWorkspace = "workspace/project",
48 |         persistence_dir: str | None = None,
49 |         conversation_id: ConversationID | None = None,
   |         --------------------------------------------- Parameter declared here
50 |         callbacks: list[ConversationCallbackType] | None = None,
51 |         max_iteration_per_run: int = 500,
   |
info: Non-matching overloads for function `__new__`:
info:   (cls: @Todo, agent: AgentBase, *, workspace: RemoteWorkspace, conversation_id: UUID | None = None, callbacks: list[(Event, /) -> None] | None = None, max_iteration_per_run: int = Literal[500], stuck_detection: bool = Literal[True], visualizer: type[ConversationVisualizerBase] | ConversationVisualizerBase | None = <class 'DefaultConversationVisualizer'>, secrets: dict[str, str | SecretSource] | dict[str, str] | None = None) -> RemoteConversation
info: rule `invalid-argument-type` is enabled by default

warning[possibly-missing-attribute]: Attribute `send_message` may be missing on object of type `@Todo | Conversation`
   --> omoi_os/services/agent_executor.py:182:13
    |
181 |             # Send task message
182 |             conversation.send_message(task_message)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
183 |
184 |             # Run agent
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `run` may be missing on object of type `@Todo | Conversation`
   --> omoi_os/services/agent_executor.py:185:13
    |
184 |             # Run agent
185 |             conversation.run()
    |             ^^^^^^^^^^^^^^^^
186 |
187 |             # Extract result with conversation metadata
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `state` may be missing on object of type `@Todo | Conversation`
   --> omoi_os/services/agent_executor.py:189:27
    |
187 |             # Extract result with conversation metadata
188 |             result = {
189 |                 "status": conversation.state.execution_status,
    |                           ^^^^^^^^^^^^^^^^^^
190 |                 "event_count": len(conversation.state.events),
191 |                 "cost": conversation.conversation_stats.get_combined_metrics().accumulated_cost,
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `state` may be missing on object of type `@Todo | Conversation`
   --> omoi_os/services/agent_executor.py:190:36
    |
188 |             result = {
189 |                 "status": conversation.state.execution_status,
190 |                 "event_count": len(conversation.state.events),
    |                                    ^^^^^^^^^^^^^^^^^^
191 |                 "cost": conversation.conversation_stats.get_combined_metrics().accumulated_cost,
192 |                 "conversation_id": conversation.state.id,
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `conversation_stats` may be missing on object of type `@Todo | Conversation`
   --> omoi_os/services/agent_executor.py:191:25
    |
189 |                 "status": conversation.state.execution_status,
190 |                 "event_count": len(conversation.state.events),
191 |                 "cost": conversation.conversation_stats.get_combined_metrics().accumulated_cost,
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
192 |                 "conversation_id": conversation.state.id,
193 |                 "persistence_dir": persistence_dir,
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `state` may be missing on object of type `@Todo | Conversation`
   --> omoi_os/services/agent_executor.py:192:36
    |
190 |                 "event_count": len(conversation.state.events),
191 |                 "cost": conversation.conversation_stats.get_combined_metrics().accumulated_cost,
192 |                 "conversation_id": conversation.state.id,
    |                                    ^^^^^^^^^^^^^^^^^^
193 |                 "persistence_dir": persistence_dir,
194 |             }
    |
info: rule `possibly-missing-attribute` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
  --> omoi_os/services/agent_health.py:80:20
   |
78 |     def check_agent_health(
79 |         self, agent_id: str, timeout_seconds: Optional[int] = None
80 |     ) -> Dict[str, any]:
   |                    ^^^
81 |         """
82 |         Check the health status of a specific agent.
   |
info: rule `invalid-type-form` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/agent_health.py:186:25
    |
184 |     def get_all_agents_health(
185 |         self, timeout_seconds: Optional[int] = None
186 |     ) -> List[Dict[str, any]]:
    |                         ^^^
187 |         """
188 |         Get health status for all agents.
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/agent_health.py:294:49
    |
292 |             return count
293 |
294 |     def get_agent_statistics(self) -> Dict[str, any]:
    |                                                 ^^^
295 |         """
296 |         Get comprehensive statistics about all agents.
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-assignment]: Cannot assign to a subscript on an object of type `int`
   --> omoi_os/services/agent_health.py:330:17
    |
328 |                 # Status statistics
329 |                 status = agent.status
330 |                 stats["by_status"][status] = stats["by_status"].get(status, 0) + 1
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
331 |
332 |                 # Type statistics
    |
info: The full type of the subscripted object is `Unknown | int | dict[Unknown, Unknown] | dict[Unknown | str, Unknown | int]`
info: `int` does not have a `__setitem__` method.
info: rule `invalid-assignment` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `Unknown | int | dict[Unknown, Unknown] | dict[Unknown | str, Unknown | int]`
   --> omoi_os/services/agent_health.py:330:46
    |
328 |                 # Status statistics
329 |                 status = agent.status
330 |                 stats["by_status"][status] = stats["by_status"].get(status, 0) + 1
    |                                              ^^^^^^^^^^^^^^^^^^^^^^
331 |
332 |                 # Type statistics
    |
info: rule `possibly-missing-attribute` is enabled by default

error[invalid-assignment]: Cannot assign to a subscript on an object of type `int`
   --> omoi_os/services/agent_health.py:334:17
    |
332 |                 # Type statistics
333 |                 agent_type = agent.agent_type
334 |                 stats["by_type"][agent_type] = stats["by_type"].get(agent_type, 0) + 1
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
335 |
336 |                 # Phase statistics
    |
info: The full type of the subscripted object is `Unknown | int | dict[Unknown, Unknown] | dict[Unknown | str, Unknown | int]`
info: `int` does not have a `__setitem__` method.
info: rule `invalid-assignment` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `Unknown | int | dict[Unknown, Unknown] | dict[Unknown | str, Unknown | int]`
   --> omoi_os/services/agent_health.py:334:48
    |
332 |                 # Type statistics
333 |                 agent_type = agent.agent_type
334 |                 stats["by_type"][agent_type] = stats["by_type"].get(agent_type, 0) + 1
    |                                                ^^^^^^^^^^^^^^^^^^^^
335 |
336 |                 # Phase statistics
    |
info: rule `possibly-missing-attribute` is enabled by default

error[invalid-assignment]: Cannot assign to a subscript on an object of type `int`
   --> omoi_os/services/agent_health.py:338:17
    |
336 |                 # Phase statistics
337 |                 phase = agent.phase_id or "no_phase"
338 |                 stats["by_phase"][phase] = stats["by_phase"].get(phase, 0) + 1
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^
339 |
340 |                 # Health summary
    |
info: The full type of the subscripted object is `Unknown | int | dict[Unknown, Unknown] | dict[Unknown | str, Unknown | int]`
info: `int` does not have a `__setitem__` method.
info: rule `invalid-assignment` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `Unknown | int | dict[Unknown, Unknown] | dict[Unknown | str, Unknown | int]`
   --> omoi_os/services/agent_health.py:338:44
    |
336 |                 # Phase statistics
337 |                 phase = agent.phase_id or "no_phase"
338 |                 stats["by_phase"][phase] = stats["by_phase"].get(phase, 0) + 1
    |                                            ^^^^^^^^^^^^^^^^^^^^^
339 |
340 |                 # Health summary
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> omoi_os/services/agent_output_collector.py:163:41
    |
161 |             try:
162 |                 recent_files = []
163 |                 current_time = datetime.utcnow()
    |                                         ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
164 |                 for file_path in workspace_path.rglob("*"):
165 |                     if file_path.is_file():
    |
info: rule `deprecated` is enabled by default

error[unresolved-attribute]: Object of type `RSAPublicKey` has no attribute `serialize`
   --> omoi_os/services/agent_registry.py:525:30
    |
524 |             # Serialize public key
525 |             public_key_pem = public_key.serialize(
    |                              ^^^^^^^^^^^^^^^^^^^^
526 |                 encoding=serialization.Encoding.PEM,
527 |                 format=serialization.PublicFormat.SubjectPublicKeyInfo,
    |
info: rule `unresolved-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `Unknown | list[Unknown] | str | None`
  --> omoi_os/services/board.py:90:13
   |
88 |             }
89 |
90 |             board["columns"].append(column_data)
   |             ^^^^^^^^^^^^^^^^^^^^^^^
91 |
92 |         return board
   |
info: rule `possibly-missing-attribute` is enabled by default

error[unresolved-import]: Module `omoi_os.api.main` has no member `memory_service`
   --> omoi_os/services/collaboration.py:498:50
    |
496 |             if message_type in ("discovery", "warning") and message:
497 |                 try:
498 |                     from omoi_os.api.main import memory_service
    |                                                  ^^^^^^^^^^^^^^
499 |                     if memory_service:
500 |                         # Determine memory type based on message_type
    |
info: rule `unresolved-import` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
   --> omoi_os/services/collaboration.py:662:41
    |
661 | …                     # Send message (already formatted with prefix)
662 | …                     conversation.send_message(formatted_message)
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^
663 | …                     
664 | …                     # Trigger processing if idle (non-blocking)
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-import]: Module `openhands.sdk.conversation.state` has no member `AgentExecutionStatus`
   --> omoi_os/services/collaboration.py:665:86
    |
664 | …                     # Trigger processing if idle (non-blocking)
665 | …                     from openhands.sdk.conversation.state import AgentExecutionStatus
    |                                                                    ^^^^^^^^^^^^^^^^^^^^
666 | …                     if conversation.state.agent_status == AgentExecutionStatus.IDLE:
667 | …                         import threading
    |
info: rule `unresolved-import` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `state`
   --> omoi_os/services/collaboration.py:666:44
    |
664 | …                     # Trigger processing if idle (non-blocking)
665 | …                     from openhands.sdk.conversation.state import AgentExecutionStatus
666 | …                     if conversation.state.agent_status == AgentExecutionStatus.IDLE:
    |                          ^^^^^^^^^^^^^^^^^^
667 | …                         import threading
668 | …                         thread = threading.Thread(target=conversation.run, daemon=True)
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
   --> omoi_os/services/collaboration.py:668:78
    |
666 | …                                 if conversation.state.agent_status == AgentExecutionStatus.IDLE:
667 | …                                     import threading
668 | …                                     thread = threading.Thread(target=conversation.run, daemon=True)
    |                                                                        ^^^^^^^^^^^^^^^^
669 | …                                     thread.start()
670 | …                     except Exception as delivery_error:
    |
info: rule `unresolved-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `ainvoke` may be missing on object of type `Unknown | LLMService`
   --> omoi_os/services/conductor.py:433:24
    |
431 |             """
432 |
433 |             response = self.llm_service.ainvoke(prompt)
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^
434 |             return response
    |
info: rule `possibly-missing-attribute` is enabled by default

error[invalid-argument-type]: Argument to function `__new__` is incorrect
  --> omoi_os/services/conversation_intervention.py:64:17
   |
62 |             # Workspace can be different instance, but persistence_dir must match
63 |             conversation = Conversation(
64 |                 conversation_id=conversation_id,
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `UUID | None`, found `str`
65 |                 persistence_dir=persistence_dir,
66 |                 agent=intervention_agent,
   |
info: Matching overload defined here
  --> .venv/lib/python3.12/site-packages/openhands/sdk/conversation/conversation.py:43:9
   |
42 |     @overload
43 |     def __new__(
   |         ^^^^^^^
44 |         cls: type[Self],
45 |         agent: AgentBase,
   |
  ::: .venv/lib/python3.12/site-packages/openhands/sdk/conversation/conversation.py:49:9
   |
47 |         workspace: str | LocalWorkspace = "workspace/project",
48 |         persistence_dir: str | None = None,
49 |         conversation_id: ConversationID | None = None,
   |         --------------------------------------------- Parameter declared here
50 |         callbacks: list[ConversationCallbackType] | None = None,
51 |         max_iteration_per_run: int = 500,
   |
info: Non-matching overloads for function `__new__`:
info:   (cls: @Todo, agent: AgentBase, *, workspace: RemoteWorkspace, conversation_id: UUID | None = None, callbacks: list[(Event, /) -> None] | None = None, max_iteration_per_run: int = Literal[500], stuck_detection: bool = Literal[True], visualizer: type[ConversationVisualizerBase] | ConversationVisualizerBase | None = <class 'DefaultConversationVisualizer'>, secrets: dict[str, str | SecretSource] | dict[str, str] | None = None) -> RemoteConversation
info: rule `invalid-argument-type` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `send_message`
  --> omoi_os/services/conversation_intervention.py:75:13
   |
74 |             # Send intervention message (works even if agent is running)
75 |             conversation.send_message(intervention_message)
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^
76 |
77 |             # If agent is idle, trigger processing
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-import]: Module `openhands.sdk.conversation.state` has no member `AgentExecutionStatus`
  --> omoi_os/services/conversation_intervention.py:79:58
   |
77 |             # If agent is idle, trigger processing
78 |             # If agent is running, message will be queued and processed automatically
79 |             from openhands.sdk.conversation.state import AgentExecutionStatus
   |                                                          ^^^^^^^^^^^^^^^^^^^^
80 |             if conversation.state.agent_status == AgentExecutionStatus.IDLE:
81 |                 # Start processing in background thread to avoid blocking
   |
info: rule `unresolved-import` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `state`
  --> omoi_os/services/conversation_intervention.py:80:16
   |
78 |             # If agent is running, message will be queued and processed automatically
79 |             from openhands.sdk.conversation.state import AgentExecutionStatus
80 |             if conversation.state.agent_status == AgentExecutionStatus.IDLE:
   |                ^^^^^^^^^^^^^^^^^^
81 |                 # Start processing in background thread to avoid blocking
82 |                 import threading
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `run`
  --> omoi_os/services/conversation_intervention.py:83:50
   |
81 |                 # Start processing in background thread to avoid blocking
82 |                 import threading
83 |                 thread = threading.Thread(target=conversation.run, daemon=True)
   |                                                  ^^^^^^^^^^^^^^^^
84 |                 thread.start()
85 |                 logger.info(
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Conversation` has no attribute `state`
  --> omoi_os/services/conversation_intervention.py:91:33
   |
89 |                 logger.info(
90 |                     f"Sent intervention to running conversation {conversation_id} "
91 |                     f"(status: {conversation.state.agent_status})"
   |                                 ^^^^^^^^^^^^^^^^^^
92 |                 )
   |
info: rule `unresolved-attribute` is enabled by default

error[unsupported-operator]: Operator `>=` is not supported for types `int` and `None`, in comparing `Literal[0, 1]` with `int | None`
   --> omoi_os/services/coordination.py:170:24
    |
168 |                     completed_count += 1
169 |
170 |             is_ready = completed_count >= sync_point.required_count
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
171 |
172 |             if is_ready and self.event_bus:
    |
info: rule `unsupported-operator` is enabled by default

error[unresolved-attribute]: Object of type `Instant` has no attribute `isoformat`
   --> omoi_os/services/dependency_graph.py:199:34
    |
197 |                 "spawned_count": len(discovery.spawned_task_ids),
198 |                 "priority_boost": discovery.priority_boost,
199 |                 "discovered_at": discovery.discovered_at.isoformat() if discovery.discovered_at else None,
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
200 |             })
    |
info: rule `unresolved-attribute` is enabled by default

error[non-subscriptable]: Cannot subscript object of type `None` with no `__getitem__` method
   --> omoi_os/services/diagnostic.py:591:22
    |
589 |             # Build intervention message
590 |             recovery_task_descriptions = [
591 |                 f"- {task.description[:100]}" for task in spawned_tasks[:3]
    |                      ^^^^^^^^^^^^^^^^^^^^^^
592 |             ]
593 |             if len(spawned_tasks) > 3:
    |
info: rule `non-subscriptable` is enabled by default

error[invalid-argument-type]: Argument to function `next` is incorrect
   --> omoi_os/services/embedding.py:137:31
    |
135 |         # FastEmbed returns an iterator, get first (and only) result
136 |         embedding_iter = self.local_model.embed([prefixed_text])
137 |         base_embedding = next(embedding_iter)
    |                               ^^^^^^^^^^^^^^ Expected `SupportsNext[Unknown]`, found `Unknown | Iterable[@Todo]`
138 |
139 |         # Pad to 1536 dimensions for consistency with OpenAI
    |
info: Element `Iterable[@Todo]` of this union is not assignable to `SupportsNext[Unknown]`
info: Matching overload defined here
    --> stdlib/builtins.pyi:3934:5
     |
3932 | def min(iterable: Iterable[_T1], /, *, key: Callable[[_T1], SupportsRichComparison], default: _T2) -> _T1 | _T2: ...
3933 | @overload
3934 | def next(i: SupportsNext[_T], /) -> _T:
     |     ^^^^ ------------------- Parameter declared here
3935 |     """next(iterator[, default])
     |
info: Non-matching overloads for function `next`:
info:   (i: SupportsNext[_T@next], default: _VT@next, /) -> _T@next | _VT@next
info: rule `invalid-argument-type` is enabled by default

error[unresolved-import]: Module `omoi_os.models.event` has no member `SystemEvent`
   --> omoi_os/services/github_integration.py:354:42
    |
353 |         # Emit event
354 |         from omoi_os.models.event import SystemEvent
    |                                          ^^^^^^^^^^^
355 |         
356 |         self.event_bus.publish(
    |
info: rule `unresolved-import` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/heartbeat_protocol.py:434:71
    |
432 |                     )
433 |
434 |     def check_agent_health_with_ttl(self, agent_id: str) -> Dict[str, any]:
    |                                                                       ^^^
435 |         """
436 |         Check agent health using state-based TTL thresholds per REQ-FT-HB-002.
    |
info: rule `invalid-type-form` is enabled by default

error[unknown-argument]: Argument `session` does not match any known parameter of bound method `build_accumulated_context`
   --> omoi_os/services/intelligent_guardian.py:158:31
    |
156 |                 # Build trajectory context
157 |                 trajectory_data = self.trajectory_context.build_accumulated_context(
158 |                     agent_id, session=session
    |                               ^^^^^^^^^^^^^^^
159 |                 )
    |
info: Union variant `bound method TrajectoryContext.build_accumulated_context(agent_id: str, include_full_history: bool = Literal[True]) -> dict[str, Any]` is incompatible with this call site
info: Attempted to call union type `Unknown | (bound method TrajectoryContext.build_accumulated_context(agent_id: str, include_full_history: bool = Literal[True]) -> dict[str, Any])`
info: rule `unknown-argument` is enabled by default

warning[possibly-missing-attribute]: Attribute `ainvoke` may be missing on object of type `Unknown | LLMService`
   --> omoi_os/services/intelligent_guardian.py:545:24
    |
543 |             )
544 |
545 |             response = self.llm_service.ainvoke(prompt)
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^
546 |             return response
    |
info: rule `possibly-missing-attribute` is enabled by default

error[no-matching-overload]: No overload of bound method `__init__` matches arguments
  --> omoi_os/services/llm_service.py:80:17
   |
78 |         if system_prompt:
79 |             agent_kwargs["system_prompt"] = system_prompt
80 |         agent = Agent(**agent_kwargs)
   |                 ^^^^^^^^^^^^^^^^^^^^^
81 |         result = await agent.run(prompt)
82 |         return result.output
   |
info: First overload defined here
   --> .venv/lib/python3.12/site-packages/pydantic_ai/agent/__init__.py:160:9
    |
159 |       @overload
160 |       def __init__(
    |  _________^
161 | |         self,
162 | |         model: models.Model | models.KnownModelName | str | None = None,
163 | |         *,
164 | |         output_type: OutputSpec[OutputDataT] = str,
165 | |         instructions: str
166 | |         | _system_prompt.SystemPromptFunc[AgentDepsT]
167 | |         | Sequence[str | _system_prompt.SystemPromptFunc[AgentDepsT]]
168 | |         | None = None,
169 | |         system_prompt: str | Sequence[str] = (),
170 | |         deps_type: type[AgentDepsT] = NoneType,
171 | |         name: str | None = None,
172 | |         model_settings: ModelSettings | None = None,
173 | |         retries: int = 1,
174 | |         output_retries: int | None = None,
175 | |         tools: Sequence[Tool[AgentDepsT] | ToolFuncEither[AgentDepsT, ...]] = (),
176 | |         builtin_tools: Sequence[AbstractBuiltinTool] = (),
177 | |         prepare_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
178 | |         prepare_output_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
179 | |         toolsets: Sequence[AbstractToolset[AgentDepsT] | ToolsetFunc[AgentDepsT]] | None = None,
180 | |         defer_model_check: bool = False,
181 | |         end_strategy: EndStrategy = 'early',
182 | |         instrument: InstrumentationSettings | bool | None = None,
183 | |         history_processors: Sequence[HistoryProcessor[AgentDepsT]] | None = None,
184 | |         event_stream_handler: EventStreamHandler[AgentDepsT] | None = None,
185 | |     ) -> None: ...
    | |_____________^
186 |
187 |       @overload
    |
info: Possible overloads for bound method `__init__`:
info:   (self, model: Model | KnownModelName | str | None = None, *, output_type: @Todo = <class 'str'>, instructions: Sequence[str | @Todo] | @Todo | None = None, system_prompt: Sequence[str] = tuple[()], deps_type: @Todo = <class 'NoneType'>, name: str | None = None, model_settings: ModelSettings | None = None, retries: int = Literal[1], output_retries: int | None = None, tools: Sequence[Tool[AgentDepsT@Agent] | @Todo] = tuple[()], builtin_tools: Sequence[AbstractBuiltinTool] = tuple[()], prepare_tools: @Todo | None = None, prepare_output_tools: @Todo | None = None, toolsets: Sequence[AbstractToolset[AgentDepsT@Agent] | @Todo] | None = None, defer_model_check: bool = Literal[False], end_strategy: Literal["early", "exhaustive"] = Literal["early"], instrument: InstrumentationSettings | bool | None = None, history_processors: Sequence[@Todo] | None = None, event_stream_handler: @Todo | None = None) -> None
info:   (self, model: Model | KnownModelName | str | None = None, *, output_type: @Todo = <class 'str'>, instructions: Sequence[str | @Todo] | @Todo | None = None, system_prompt: Sequence[str] = tuple[()], deps_type: @Todo = <class 'NoneType'>, name: str | None = None, model_settings: ModelSettings | None = None, retries: int = Literal[1], output_retries: int | None = None, tools: Sequence[Tool[AgentDepsT@Agent] | @Todo] = tuple[()], builtin_tools: Sequence[AbstractBuiltinTool] = tuple[()], prepare_tools: @Todo | None = None, prepare_output_tools: @Todo | None = None, mcp_servers: Sequence[MCPServer] = tuple[()], defer_model_check: bool = Literal[False], end_strategy: Literal["early", "exhaustive"] = Literal["early"], instrument: InstrumentationSettings | bool | None = None, history_processors: Sequence[@Todo] | None = None, event_stream_handler: @Todo | None = None) -> None
info: Overload implementation defined here
   --> .venv/lib/python3.12/site-packages/pydantic_ai/agent/__init__.py:216:9
    |
214 |       ) -> None: ...
215 |
216 |       def __init__(
    |  _________^
217 | |         self,
218 | |         model: models.Model | models.KnownModelName | str | None = None,
219 | |         *,
220 | |         output_type: OutputSpec[OutputDataT] = str,
221 | |         instructions: str
222 | |         | _system_prompt.SystemPromptFunc[AgentDepsT]
223 | |         | Sequence[str | _system_prompt.SystemPromptFunc[AgentDepsT]]
224 | |         | None = None,
225 | |         system_prompt: str | Sequence[str] = (),
226 | |         deps_type: type[AgentDepsT] = NoneType,
227 | |         name: str | None = None,
228 | |         model_settings: ModelSettings | None = None,
229 | |         retries: int = 1,
230 | |         output_retries: int | None = None,
231 | |         tools: Sequence[Tool[AgentDepsT] | ToolFuncEither[AgentDepsT, ...]] = (),
232 | |         builtin_tools: Sequence[AbstractBuiltinTool] = (),
233 | |         prepare_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
234 | |         prepare_output_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
235 | |         toolsets: Sequence[AbstractToolset[AgentDepsT] | ToolsetFunc[AgentDepsT]] | None = None,
236 | |         defer_model_check: bool = False,
237 | |         end_strategy: EndStrategy = 'early',
238 | |         instrument: InstrumentationSettings | bool | None = None,
239 | |         history_processors: Sequence[HistoryProcessor[AgentDepsT]] | None = None,
240 | |         event_stream_handler: EventStreamHandler[AgentDepsT] | None = None,
241 | |         **_deprecated_kwargs: Any,
242 | |     ):
    | |_____^
243 |           """Create an agent.
    |
info: rule `no-matching-overload` is enabled by default

error[invalid-return-type]: Return type does not match returned value
   --> omoi_os/services/llm_service.py:123:16
    |
121 |         )
122 |         result = await agent.run(prompt)
123 |         return result.output
    |                ^^^^^^^^^^^^^ expected `T@structured_output`, found `str`
    |
   ::: omoi_os/services/llm_service.py:91:10
    |
 89 |         output_retries: int = 5,
 90 |         **kwargs,
 91 |     ) -> T:
    |          - Expected `T@structured_output` because of return type
 92 |         """
 93 |         Get structured output matching a Pydantic model.
    |
info: rule `invalid-return-type` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/monitor.py:479:78
    |
477 |         return results
478 |
479 |     def _get_agent_health_metrics(self, agent_id: str, session) -> Dict[str, any]:
    |                                                                              ^^^
480 |         """Get health metrics for agent from tasks and heartbeats."""
481 |         # This is a placeholder - in production, health metrics would come from
    |
info: rule `invalid-type-form` is enabled by default

error[no-matching-overload]: No overload of bound method `__init__` matches arguments
  --> omoi_os/services/pydantic_ai_service.py:95:16
   |
93 |         if system_prompt:
94 |             agent_kwargs["system_prompt"] = system_prompt
95 |         return Agent(**agent_kwargs)
   |                ^^^^^^^^^^^^^^^^^^^^^
   |
info: First overload defined here
   --> .venv/lib/python3.12/site-packages/pydantic_ai/agent/__init__.py:160:9
    |
159 |       @overload
160 |       def __init__(
    |  _________^
161 | |         self,
162 | |         model: models.Model | models.KnownModelName | str | None = None,
163 | |         *,
164 | |         output_type: OutputSpec[OutputDataT] = str,
165 | |         instructions: str
166 | |         | _system_prompt.SystemPromptFunc[AgentDepsT]
167 | |         | Sequence[str | _system_prompt.SystemPromptFunc[AgentDepsT]]
168 | |         | None = None,
169 | |         system_prompt: str | Sequence[str] = (),
170 | |         deps_type: type[AgentDepsT] = NoneType,
171 | |         name: str | None = None,
172 | |         model_settings: ModelSettings | None = None,
173 | |         retries: int = 1,
174 | |         output_retries: int | None = None,
175 | |         tools: Sequence[Tool[AgentDepsT] | ToolFuncEither[AgentDepsT, ...]] = (),
176 | |         builtin_tools: Sequence[AbstractBuiltinTool] = (),
177 | |         prepare_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
178 | |         prepare_output_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
179 | |         toolsets: Sequence[AbstractToolset[AgentDepsT] | ToolsetFunc[AgentDepsT]] | None = None,
180 | |         defer_model_check: bool = False,
181 | |         end_strategy: EndStrategy = 'early',
182 | |         instrument: InstrumentationSettings | bool | None = None,
183 | |         history_processors: Sequence[HistoryProcessor[AgentDepsT]] | None = None,
184 | |         event_stream_handler: EventStreamHandler[AgentDepsT] | None = None,
185 | |     ) -> None: ...
    | |_____________^
186 |
187 |       @overload
    |
info: Possible overloads for bound method `__init__`:
info:   (self, model: Model | KnownModelName | str | None = None, *, output_type: @Todo = <class 'str'>, instructions: Sequence[str | @Todo] | @Todo | None = None, system_prompt: Sequence[str] = tuple[()], deps_type: @Todo = <class 'NoneType'>, name: str | None = None, model_settings: ModelSettings | None = None, retries: int = Literal[1], output_retries: int | None = None, tools: Sequence[Tool[AgentDepsT@Agent] | @Todo] = tuple[()], builtin_tools: Sequence[AbstractBuiltinTool] = tuple[()], prepare_tools: @Todo | None = None, prepare_output_tools: @Todo | None = None, toolsets: Sequence[AbstractToolset[AgentDepsT@Agent] | @Todo] | None = None, defer_model_check: bool = Literal[False], end_strategy: Literal["early", "exhaustive"] = Literal["early"], instrument: InstrumentationSettings | bool | None = None, history_processors: Sequence[@Todo] | None = None, event_stream_handler: @Todo | None = None) -> None
info:   (self, model: Model | KnownModelName | str | None = None, *, output_type: @Todo = <class 'str'>, instructions: Sequence[str | @Todo] | @Todo | None = None, system_prompt: Sequence[str] = tuple[()], deps_type: @Todo = <class 'NoneType'>, name: str | None = None, model_settings: ModelSettings | None = None, retries: int = Literal[1], output_retries: int | None = None, tools: Sequence[Tool[AgentDepsT@Agent] | @Todo] = tuple[()], builtin_tools: Sequence[AbstractBuiltinTool] = tuple[()], prepare_tools: @Todo | None = None, prepare_output_tools: @Todo | None = None, mcp_servers: Sequence[MCPServer] = tuple[()], defer_model_check: bool = Literal[False], end_strategy: Literal["early", "exhaustive"] = Literal["early"], instrument: InstrumentationSettings | bool | None = None, history_processors: Sequence[@Todo] | None = None, event_stream_handler: @Todo | None = None) -> None
info: Overload implementation defined here
   --> .venv/lib/python3.12/site-packages/pydantic_ai/agent/__init__.py:216:9
    |
214 |       ) -> None: ...
215 |
216 |       def __init__(
    |  _________^
217 | |         self,
218 | |         model: models.Model | models.KnownModelName | str | None = None,
219 | |         *,
220 | |         output_type: OutputSpec[OutputDataT] = str,
221 | |         instructions: str
222 | |         | _system_prompt.SystemPromptFunc[AgentDepsT]
223 | |         | Sequence[str | _system_prompt.SystemPromptFunc[AgentDepsT]]
224 | |         | None = None,
225 | |         system_prompt: str | Sequence[str] = (),
226 | |         deps_type: type[AgentDepsT] = NoneType,
227 | |         name: str | None = None,
228 | |         model_settings: ModelSettings | None = None,
229 | |         retries: int = 1,
230 | |         output_retries: int | None = None,
231 | |         tools: Sequence[Tool[AgentDepsT] | ToolFuncEither[AgentDepsT, ...]] = (),
232 | |         builtin_tools: Sequence[AbstractBuiltinTool] = (),
233 | |         prepare_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
234 | |         prepare_output_tools: ToolsPrepareFunc[AgentDepsT] | None = None,
235 | |         toolsets: Sequence[AbstractToolset[AgentDepsT] | ToolsetFunc[AgentDepsT]] | None = None,
236 | |         defer_model_check: bool = False,
237 | |         end_strategy: EndStrategy = 'early',
238 | |         instrument: InstrumentationSettings | bool | None = None,
239 | |         history_processors: Sequence[HistoryProcessor[AgentDepsT]] | None = None,
240 | |         event_stream_handler: EventStreamHandler[AgentDepsT] | None = None,
241 | |         **_deprecated_kwargs: Any,
242 | |     ):
    | |_____^
243 |           """Create an agent.
    |
info: rule `no-matching-overload` is enabled by default

error[invalid-argument-type]: Argument to function `create_client` is incorrect
  --> omoi_os/services/supabase_auth.py:24:13
   |
22 |         # Client for admin operations (uses service role key)
23 |         self.admin_client: Client = create_client(
24 |             self.settings.url,
   |             ^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
25 |             self.settings.service_role_key,
26 |             options=ClientOptions(
   |
info: Element `None` of this union is not assignable to `str`
info: Function defined here
   --> .venv/lib/python3.12/site-packages/supabase/_sync/client.py:340:5
    |
340 | def create_client(
    |     ^^^^^^^^^^^^^
341 |     supabase_url: str,
    |     ----------------- Parameter declared here
342 |     supabase_key: str,
343 |     options: Optional[ClientOptions] = None,
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to function `create_client` is incorrect
  --> omoi_os/services/supabase_auth.py:25:13
   |
23 |         self.admin_client: Client = create_client(
24 |             self.settings.url,
25 |             self.settings.service_role_key,
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
26 |             options=ClientOptions(
27 |                 auto_refresh_token=False,
   |
info: Element `None` of this union is not assignable to `str`
info: Function defined here
   --> .venv/lib/python3.12/site-packages/supabase/_sync/client.py:340:5
    |
340 | def create_client(
    |     ^^^^^^^^^^^^^
341 |     supabase_url: str,
342 |     supabase_key: str,
    |     ----------------- Parameter declared here
343 |     options: Optional[ClientOptions] = None,
344 | ) -> Client:
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to function `create_client` is incorrect
  --> omoi_os/services/supabase_auth.py:26:13
   |
24 |               self.settings.url,
25 |               self.settings.service_role_key,
26 | /             options=ClientOptions(
27 | |                 auto_refresh_token=False,
28 | |                 persist_session=False,
29 | |             ),
   | |_____________^ Expected `SyncClientOptions | None`, found `ClientOptions`
30 |           )
   |
info: Function defined here
   --> .venv/lib/python3.12/site-packages/supabase/_sync/client.py:340:5
    |
340 | def create_client(
    |     ^^^^^^^^^^^^^
341 |     supabase_url: str,
342 |     supabase_key: str,
343 |     options: Optional[ClientOptions] = None,
    |     --------------------------------------- Parameter declared here
344 | ) -> Client:
345 |     """Create client function to instantiate supabase client like JS runtime.
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to function `create_client` is incorrect
  --> omoi_os/services/supabase_auth.py:35:13
   |
33 |         # This is typically used on the frontend, but available here for server-side user ops
34 |         self.client: Client = create_client(
35 |             self.settings.url,
   |             ^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
36 |             self.settings.anon_key,
37 |         )
   |
info: Element `None` of this union is not assignable to `str`
info: Function defined here
   --> .venv/lib/python3.12/site-packages/supabase/_sync/client.py:340:5
    |
340 | def create_client(
    |     ^^^^^^^^^^^^^
341 |     supabase_url: str,
    |     ----------------- Parameter declared here
342 |     supabase_key: str,
343 |     options: Optional[ClientOptions] = None,
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to function `create_client` is incorrect
  --> omoi_os/services/supabase_auth.py:36:13
   |
34 |         self.client: Client = create_client(
35 |             self.settings.url,
36 |             self.settings.anon_key,
   |             ^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
37 |         )
   |
info: Element `None` of this union is not assignable to `str`
info: Function defined here
   --> .venv/lib/python3.12/site-packages/supabase/_sync/client.py:340:5
    |
340 | def create_client(
    |     ^^^^^^^^^^^^^
341 |     supabase_url: str,
342 |     supabase_key: str,
    |     ----------------- Parameter declared here
343 |     options: Optional[ClientOptions] = None,
344 | ) -> Client:
    |
info: rule `invalid-argument-type` is enabled by default

warning[possibly-missing-attribute]: Attribute `user` may be missing on object of type `Unknown | UserResponse | None`
  --> omoi_os/services/supabase_auth.py:52:16
   |
50 |             # Use admin client to verify token
51 |             response = self.admin_client.auth.get_user(token)
52 |             if response.user:
   |                ^^^^^^^^^^^^^
53 |                 return {
54 |                     "id": response.user.id,
   |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `user` may be missing on object of type `Unknown | UserResponse | None`
  --> omoi_os/services/supabase_auth.py:54:27
   |
52 |             if response.user:
53 |                 return {
54 |                     "id": response.user.id,
   |                           ^^^^^^^^^^^^^
55 |                     "email": response.user.email,
56 |                     "user_metadata": response.user.user_metadata or {},
   |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `user` may be missing on object of type `Unknown | UserResponse | None`
  --> omoi_os/services/supabase_auth.py:55:30
   |
53 |                 return {
54 |                     "id": response.user.id,
55 |                     "email": response.user.email,
   |                              ^^^^^^^^^^^^^
56 |                     "user_metadata": response.user.user_metadata or {},
57 |                 }
   |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `user` may be missing on object of type `Unknown | UserResponse | None`
  --> omoi_os/services/supabase_auth.py:56:38
   |
54 |                     "id": response.user.id,
55 |                     "email": response.user.email,
56 |                     "user_metadata": response.user.user_metadata or {},
   |                                      ^^^^^^^^^^^^^
57 |                 }
58 |         except Exception:
   |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `create_task` may be missing on object of type `Unknown | TaskQueueService`
   --> omoi_os/services/ticket_workflow.py:644:17
    |
643 |             try:
644 |                 self.task_queue.create_task(
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
645 |                     ticket_id=ticket_id,
646 |                     phase_id=ticket.phase_id,
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
  --> omoi_os/services/trajectory_context.py:76:47
   |
74 |         if agent_id in self.context_cache:
75 |             cached = self.context_cache[agent_id]
76 |             if cached["timestamp"] > datetime.utcnow() - self.cache_ttl:
   |                                               ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
77 |                 return cached["context"]
   |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> omoi_os/services/trajectory_context.py:120:76
    |
118 |                 "conversation_length": len(conversation),
119 |                 "session_duration": self._calculate_session_duration(logs),
120 |                 "last_activity": logs[-1].created_at if logs else datetime.utcnow(),
    |                                                                            ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
121 |                 "agent_id": agent_id,
122 |                 "agent_type": agent.agent_type if agent else "unknown",
    |
info: rule `deprecated` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:138:17
    |
136 |             accumulated_context = AccumulatedContext(
137 |                 agent_id=agent_id,
138 |                 context_summary=context.get("overall_goal", ""),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `Unknown | str | list[str] | ... omitted 4 union elements`
139 |                 persistent_constraints=[
140 |                     PersistentConstraint(
    |
info: Union element `list[str]`, and 4 more union elements, are not assignable to `str`
info: rule `invalid-argument-type` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `Unknown | str | list[str]`
   --> omoi_os/services/trajectory_context.py:141:41
    |
139 |                 persistent_constraints=[
140 |                     PersistentConstraint(
141 |                         constraint_type=constraint.get("type", "general"),
    |                                         ^^^^^^^^^^^^^^
142 |                         description=constraint.get("description", ""),
143 |                         source=constraint.get("source", "conversation"),
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `Unknown | str | list[str]`
   --> omoi_os/services/trajectory_context.py:142:37
    |
140 |                     PersistentConstraint(
141 |                         constraint_type=constraint.get("type", "general"),
142 |                         description=constraint.get("description", ""),
    |                                     ^^^^^^^^^^^^^^
143 |                         source=constraint.get("source", "conversation"),
144 |                         strength=constraint.get("strength", 1.0),
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `Unknown | str | list[str]`
   --> omoi_os/services/trajectory_context.py:143:32
    |
141 |                         constraint_type=constraint.get("type", "general"),
142 |                         description=constraint.get("description", ""),
143 |                         source=constraint.get("source", "conversation"),
    |                                ^^^^^^^^^^^^^^
144 |                         strength=constraint.get("strength", 1.0),
145 |                         created_at=datetime.utcnow(),  # Would need actual timestamp from constraint
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `Unknown | str | list[str]`
   --> omoi_os/services/trajectory_context.py:144:34
    |
142 |                         description=constraint.get("description", ""),
143 |                         source=constraint.get("source", "conversation"),
144 |                         strength=constraint.get("strength", 1.0),
    |                                  ^^^^^^^^^^^^^^
145 |                         created_at=datetime.utcnow(),  # Would need actual timestamp from constraint
146 |                     )
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> omoi_os/services/trajectory_context.py:145:45
    |
143 |                         source=constraint.get("source", "conversation"),
144 |                         strength=constraint.get("strength", 1.0),
145 |                         created_at=datetime.utcnow(),  # Would need actual timestamp from constraint
    |                                             ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
146 |                     )
147 |                     for constraint in context.get("constraints", [])
    |
info: rule `deprecated` is enabled by default

error[not-iterable]: Object of type `Unknown | str | list[str] | ... omitted 4 union elements` may not be iterable
   --> omoi_os/services/trajectory_context.py:147:39
    |
145 |                         created_at=datetime.utcnow(),  # Would need actual timestamp from constraint
146 |                     )
147 |                     for constraint in context.get("constraints", [])
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
148 |                 ],
149 |                 session_duration=context.get("session_duration"),
    |
info: It may not have an `__iter__` method and its `__getitem__` method (with type `Unknown | (Overload[(key: SupportsIndex | slice[Any, Any, Any], /) -> LiteralString, (key: SupportsIndex | slice[Any, Any, Any], /) -> str]) | (Overload[(i: SupportsIndex, /) -> str, (s: slice[Any, Any, Any], /) -> list[str]]) | (bound method dict[str, str].__getitem__(key: str, /) -> str) | (bound method dict[str, list[str]].__getitem__(key: str, /) -> list[str])`) may have an incorrect signature for the old-style iteration protocol
info: `__getitem__` must be at least as permissive as `def __getitem__(self, key: int): ...` to satisfy the old-style iteration protocol
info: rule `not-iterable` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:149:17
    |
147 |                     for constraint in context.get("constraints", [])
148 |                 ],
149 |                 session_duration=context.get("session_duration"),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `timedelta | None`, found `Unknown | str | list[str] | ... omitted 5 union elements`
150 |                 conversation_events=[
151 |                     ConversationEvent(
    |
info: Union element `str`, and 4 more union elements, are not assignable to `timedelta | None`
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:152:25
    |
150 |                 conversation_events=[
151 |                     ConversationEvent(
152 |                         id=log.id or "unknown",  # AgentLog might not have UUID
    |                         ^^^^^^^^^^^^^^^^^^^^^^ Expected `UUID`, found `(@Todo & ~AlwaysFalsy) | Literal["unknown"]`
153 |                         agent_id=agent_id,
154 |                         event_type=log.log_type,
    |
info: Element `Literal["unknown"]` of this union is not assignable to `UUID`
info: rule `invalid-argument-type` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> omoi_os/services/trajectory_context.py:162:39
    |
160 |                 ],
161 |                 task_completion_rate=self._calculate_completion_rate(context, task),
162 |                 last_updated=datetime.utcnow(),
    |                                       ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
163 |             )
    |
info: rule `deprecated` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:167:17
    |
165 |             trajectory_context = TrajectoryContextModel(
166 |                 accumulated_context=accumulated_context,
167 |                 current_phase=context.get("phase_id", "unknown"),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `Unknown | str | list[str] | ... omitted 4 union elements`
168 |                 current_focus=context.get("current_focus", "Unknown"),
169 |                 accumulated_goal=context.get("overall_goal"),
    |
info: Union element `list[str]`, and 4 more union elements, are not assignable to `str`
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:168:17
    |
166 |                 accumulated_context=accumulated_context,
167 |                 current_phase=context.get("phase_id", "unknown"),
168 |                 current_focus=context.get("current_focus", "Unknown"),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `Unknown | str | list[str] | ... omitted 4 union elements`
169 |                 accumulated_goal=context.get("overall_goal"),
170 |                 conversation_length=context.get("conversation_length", 0),
    |
info: Union element `list[str]`, and 4 more union elements, are not assignable to `str`
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:169:17
    |
167 |                 current_phase=context.get("phase_id", "unknown"),
168 |                 current_focus=context.get("current_focus", "Unknown"),
169 |                 accumulated_goal=context.get("overall_goal"),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str | None`, found `Unknown | str | list[str] | ... omitted 5 union elements`
170 |                 conversation_length=context.get("conversation_length", 0),
171 |                 session_duration=context.get("session_duration"),
    |
info: Union element `list[str]`, and 4 more union elements, are not assignable to `str | None`
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:170:17
    |
168 |                 current_focus=context.get("current_focus", "Unknown"),
169 |                 accumulated_goal=context.get("overall_goal"),
170 |                 conversation_length=context.get("conversation_length", 0),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `int`, found `Unknown | str | list[str] | ... omitted 4 union elements`
171 |                 session_duration=context.get("session_duration"),
172 |                 last_claude_message_marker=self._find_last_claude_marker(context),
    |
info: Union element `str`, and 4 more union elements, are not assignable to `int`
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument is incorrect
   --> omoi_os/services/trajectory_context.py:171:17
    |
169 |                 accumulated_goal=context.get("overall_goal"),
170 |                 conversation_length=context.get("conversation_length", 0),
171 |                 session_duration=context.get("session_duration"),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `timedelta | None`, found `Unknown | str | list[str] | ... omitted 5 union elements`
172 |                 last_claude_message_marker=self._find_last_claude_marker(context),
173 |             )
    |
info: Union element `str`, and 4 more union elements, are not assignable to `timedelta | None`
info: rule `invalid-argument-type` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> omoi_os/services/trajectory_context.py:178:39
    |
176 |             self.context_cache[agent_id] = {
177 |                 "context": context,
178 |                 "timestamp": datetime.utcnow(),
    |                                       ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
179 |             }
    |
info: rule `deprecated` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `dict[Unknown, Unknown] | None`
   --> omoi_os/services/trajectory_context.py:206:38
    |
204 |                 conversation.append({
205 |                     **entry,
206 |                     "steering_type": log.details.get("type", "unknown"),
    |                                      ^^^^^^^^^^^^^^^
207 |                 })
    |
info: rule `possibly-missing-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Task & ~AlwaysFalsy` has no attribute `enriched_description`
   --> omoi_os/services/trajectory_context.py:229:25
    |
227 |         # Start with task description if available
228 |         if task:
229 |             base_goal = task.enriched_description or task.raw_description
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^
230 |         else:
231 |             base_goal = "Complete assigned task"
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `Task & ~AlwaysFalsy` has no attribute `raw_description`
   --> omoi_os/services/trajectory_context.py:229:54
    |
227 |         # Start with task description if available
228 |         if task:
229 |             base_goal = task.enriched_description or task.raw_description
    |                                                      ^^^^^^^^^^^^^^^^^^^^
230 |         else:
231 |             base_goal = "Complete assigned task"
    |
info: rule `unresolved-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> omoi_os/services/trajectory_context.py:549:39
    |
547 |             "conversation_length": 0,
548 |             "session_duration": timedelta(0),
549 |             "last_activity": datetime.utcnow(),
    |                                       ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
550 |             "agent_id": None,
551 |             "agent_type": "unknown",
    |
info: rule `deprecated` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/validation_orchestrator.py:406:20
    |
404 |         evidence: Optional[Dict] = None,
405 |         recommendations: Optional[List[str]] = None,
406 |     ) -> Dict[str, any]:
    |                    ^^^
407 |         """Submit validation review (REQ-VAL-SM-002, REQ-VAL-SEC-001).
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/validation_orchestrator.py:529:73
    |
527 |     # -------------------------------------------------------------------------
528 |     
529 |     def get_validation_status(self, task_id: str) -> Optional[Dict[str, any]]:
    |                                                                         ^^^
530 |         """Get validation status for a task (REQ-VAL-API).
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-argument-type]: Argument to bound method `store_execution` is incorrect
   --> omoi_os/services/validation_orchestrator.py:605:21
    |
603 |                                      f"Feedback: {review.feedback}",
604 |                     success=review.validation_passed,
605 |                     error_patterns=[review.feedback] if not review.validation_passed else None,
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `dict[str, Any] | None`, found `list[Unknown | str] | None`
606 |                 )
607 |                 session.commit()
    |
info: Element `list[Unknown | str]` of this union is not assignable to `dict[str, Any] | None`
info: Method defined here
   --> omoi_os/services/memory.py:148:9
    |
146 |             return MemoryType.DISCOVERY.value
147 |
148 |     def store_execution(
    |         ^^^^^^^^^^^^^^^
149 |         self,
150 |         session: Session,
    |
   ::: omoi_os/services/memory.py:154:9
    |
152 |         execution_summary: str,
153 |         success: bool,
154 |         error_patterns: Optional[Dict[str, Any]] = None,
    |         ----------------------------------------------- Parameter declared here
155 |         auto_extract_patterns: bool = True,
156 |         memory_type: Optional[str] = None,
    |
info: Union variant `bound method MemoryService.store_execution(session: Session, task_id: str, execution_summary: str, success: bool, error_patterns: dict[str, Any] | None = None, auto_extract_patterns: bool = Literal[True], memory_type: str | None = None) -> TaskMemory` is incompatible with this call site
info: Attempted to call union type `Unknown | (bound method MemoryService.store_execution(session: Session, task_id: str, execution_summary: str, success: bool, error_patterns: dict[str, Any] | None = None, auto_extract_patterns: bool = Literal[True], memory_type: str | None = None) -> TaskMemory)`
info: rule `invalid-argument-type` is enabled by default

error[invalid-return-type]: Function can implicitly return `None`, which is not assignable to return type `bool`
   --> omoi_os/services/watchdog.py:338:10
    |
336 |     def _execute_restart(
337 |         self, agent_id: str, watchdog_action_id: str, reason: str
338 |     ) -> bool:
    |          ^^^^
339 |         """Execute restart remediation action.
    |
info: rule `invalid-return-type` is enabled by default

error[unresolved-import]: Module `omoi_os.config` has no member `load_workspace_settings`
  --> omoi_os/services/workspace_manager.py:13:47
   |
11 | from uuid import uuid4
12 |
13 | from omoi_os.config import WorkspaceSettings, load_workspace_settings
   |                                               ^^^^^^^^^^^^^^^^^^^^^^^
14 | from omoi_os.models.workspace import (
15 |     AgentWorkspace,
   |
info: rule `unresolved-import` is enabled by default

error[unresolved-import]: Cannot resolve imported module `examples.workspace_managers`
  --> omoi_os/services/workspace_manager.py:23:6
   |
22 | # Import OOP workspace managers from examples
23 | from examples.workspace_managers import (
   |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
24 |     LocalCommandExecutor,
25 |     LocalWorkspaceManager,
   |
info: Searched in the following paths during module resolution:
info:   1. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend (first-party code)
info:   2. vendored://stdlib (stdlib typeshed stubs vendored by ty)
info:   3. /Users/kevinhill/.cache/uv/archive-v0/7K-TfEX3wTIQxRy2mUldM/lib/python3.12/site-packages (site-packages)
info:   4. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend/.venv/lib/python3.12/site-packages (site-packages)
info: make sure your Python environment is properly configured: https://docs.astral.sh/ty/modules/#python-environment
info: rule `unresolved-import` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/workspace_manager.py:425:20
    |
423 |     def cleanup_workspace(
424 |         self, agent_id: str, preserve_branch: bool = True
425 |     ) -> Dict[str, any]:
    |                    ^^^
426 |         """
427 |         Delete a workspace and (optionally) preserve its Git branch for debugging.
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> omoi_os/services/workspace_manager.py:518:72
    |
516 |             )
517 |
518 |     def _get_workspace_info(self, agent_id: str) -> Optional[Dict[str, any]]:
    |                                                                        ^^^
519 |         """Get workspace information from database."""
520 |         with self.db.get_session() as session:
    |
info: rule `invalid-type-form` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:257:13
    |
255 |     tools: list[ToolDefinition] = [
256 |         ToolDefinition(
257 |             name="mcp__hephaestus__create_ticket",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
258 |             description="Create a new ticket in the workflow tracking system.",
259 |             action_type=CreateTicketAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:264:13
    |
262 |         ),
263 |         ToolDefinition(
264 |             name="mcp__hephaestus__update_ticket",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
265 |             description="Update fields of an existing ticket.",
266 |             action_type=UpdateTicketAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:271:13
    |
269 |         ),
270 |         ToolDefinition(
271 |             name="mcp__hephaestus__change_ticket_status",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
272 |             description="Change ticket status with optional commit linkage.",
273 |             action_type=ChangeStatusAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:278:13
    |
276 |         ),
277 |         ToolDefinition(
278 |             name="mcp__hephaestus__add_ticket_comment",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
279 |             description="Add a comment to a ticket.",
280 |             action_type=AddCommentAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:285:13
    |
283 |         ),
284 |         ToolDefinition(
285 |             name="mcp__hephaestus__search_tickets",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
286 |             description="Search tickets (hybrid by default: semantic + keyword).",
287 |             action_type=SearchTicketsAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:292:13
    |
290 |         ),
291 |         ToolDefinition(
292 |             name="mcp__hephaestus__get_tickets",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
293 |             description="List tickets with filters and pagination.",
294 |             action_type=GetTicketsAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:299:13
    |
297 |         ),
298 |         ToolDefinition(
299 |             name="mcp__hephaestus__get_ticket",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
300 |             description="Get details of a single ticket.",
301 |             action_type=GetTicketAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:306:13
    |
304 |         ),
305 |         ToolDefinition(
306 |             name="mcp__hephaestus__link_commit",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
307 |             description="Link a git commit to a ticket.",
308 |             action_type=LinkCommitAction,
    |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `name` does not match any known parameter
   --> omoi_os/ticketing/mcp_tools.py:313:13
    |
311 |         ),
312 |         ToolDefinition(
313 |             name="mcp__hephaestus__resolve_ticket",
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
314 |             description="Resolve a ticket and automatically unblock dependents.",
315 |             action_type=ResolveTicketAction,
    |
info: rule `unknown-argument` is enabled by default

error[too-many-positional-arguments]: Too many positional arguments to bound method `from_utc`: expected 7, got 8
  --> omoi_os/utils/datetime.py:37:72
   |
35 |         datetime: UTC datetime as timezone-aware datetime
36 |     """
37 |     instant = Instant.from_utc(year, month, day, hour, minute, second, microsecond)
   |                                                                        ^^^^^^^^^^^
38 |     return instant.py_datetime()
   |
info: Method signature here
   --> .venv/lib/python3.12/site-packages/whenever/__init__.pyi:405:9
    |
403 |       def __init__(self, iso_string: str, /) -> None: ...
404 |       @classmethod
405 |       def from_utc(
    |  _________^
406 | |         cls,
407 | |         year: int,
408 | |         month: int,
409 | |         day: int,
410 | |         hour: int = 0,
411 | |         minute: int = 0,
412 | |         second: int = 0,
413 | |         *,
414 | |         nanosecond: int = 0,
415 | |     ) -> Self: ...
    | |_____________^
416 |       MIN: ClassVar[Self]
417 |       MAX: ClassVar[Self]
    |
info: rule `too-many-positional-arguments` is enabled by default

error[invalid-type-form]: Variable of type `def callable(obj: object, /) -> TypeIs[() -> object]` is not allowed in a type expression
  --> omoi_os/worker.py:48:36
   |
46 |         heartbeat_protocol_service,
47 |         current_task_id: Optional[str] = None,
48 |         get_agent_status: Optional[callable] = None,
   |                                    ^^^^^^^^
49 |         collect_health_metrics: Optional[callable] = None,
50 |     ):
   |
info: rule `invalid-type-form` is enabled by default

error[invalid-type-form]: Variable of type `def callable(obj: object, /) -> TypeIs[() -> object]` is not allowed in a type expression
  --> omoi_os/worker.py:49:42
   |
47 |         current_task_id: Optional[str] = None,
48 |         get_agent_status: Optional[callable] = None,
49 |         collect_health_metrics: Optional[callable] = None,
   |                                          ^^^^^^^^
50 |     ):
51 |         """
   |
info: rule `invalid-type-form` is enabled by default

error[call-non-callable]: Object of type `object` is not callable
   --> omoi_os/worker.py:334:17
    |
332 |             # Attempt to terminate the OpenHands conversation
333 |             if hasattr(executor, "terminate_conversation"):
334 |                 executor.terminate_conversation()
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
335 |                 print(f"Terminated conversation for timed-out task {task.id}")
336 |             else:
    |
info: rule `call-non-callable` is enabled by default

error[invalid-argument-type]: Argument to bound method `get_assigned_tasks` is incorrect
   --> omoi_os/worker.py:392:69
    |
390 |             "memory_usage_mb": 0,
391 |             "active_connections": 0,
392 |             "pending_operations": len(task_queue.get_assigned_tasks(agent_id))
    |                                                                     ^^^^^^^^ Expected `str`, found `UUID`
393 |             if task_queue
394 |             else 0,
    |
info: Method defined here
   --> omoi_os/services/task_queue.py:271:9
    |
269 |                     task.completed_at = utc_now()
270 |
271 |     def get_assigned_tasks(self, agent_id: str) -> list[Task]:
    |         ^^^^^^^^^^^^^^^^^^       ------------- Parameter declared here
272 |         """
273 |         Get all tasks assigned to a specific agent.
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
   --> omoi_os/worker.py:403:9
    |
401 |         agent_id=str(agent_id),
402 |         heartbeat_protocol_service=heartbeat_protocol_service,
403 |         current_task_id=get_current_task_id,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str | None`, found `def get_current_task_id() -> Unknown`
404 |         get_agent_status=get_agent_status,
405 |         collect_health_metrics=collect_health_metrics,
    |
info: Method defined here
  --> omoi_os/worker.py:43:9
   |
41 |     HIGH_LOAD_INTERVAL = 10  # Under high load: 10s
42 |
43 |     def __init__(
   |         ^^^^^^^^
44 |         self,
45 |         agent_id: str,
46 |         heartbeat_protocol_service,
47 |         current_task_id: Optional[str] = None,
   |         ------------------------------------- Parameter declared here
48 |         get_agent_status: Optional[callable] = None,
49 |         collect_health_metrics: Optional[callable] = None,
   |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to bound method `get_assigned_tasks` is incorrect
   --> omoi_os/worker.py:420:55
    |
418 |             while True:
419 |                 # Get assigned tasks for this agent
420 |                 tasks = task_queue.get_assigned_tasks(agent_id)
    |                                                       ^^^^^^^^ Expected `str`, found `UUID`
421 |
422 |                 if tasks:
    |
info: Method defined here
   --> omoi_os/services/task_queue.py:271:9
    |
269 |                     task.completed_at = utc_now()
270 |
271 |     def get_assigned_tasks(self, agent_id: str) -> list[Task]:
    |         ^^^^^^^^^^^^^^^^^^       ------------- Parameter declared here
272 |         """
273 |         Get all tasks assigned to a specific agent.
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-return-type]: Return type does not match returned value
   --> omoi_os/worker.py:508:16
    |
506 |         session.commit()
507 |
508 |         return agent_id
    |                ^^^^^^^^ expected `UUID`, found `str`
    |
   ::: omoi_os/worker.py:476:6
    |
474 |     phase_id: str | None = None,
475 |     capacity: int = 1,
476 | ) -> UUID:
    |      ---- Expected `UUID` because of return type
477 |     """
478 |     Register this agent in the database.
    |
info: rule `invalid-return-type` is enabled by default

error[unresolved-import]: Cannot resolve imported module `versions.migration_030_auth_system_foundation`
  --> scripts/apply_auth_migration.py:16:6
   |
15 | # Import the migration
16 | from versions.migration_030_auth_system_foundation import upgrade
   |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
17 |
18 | def apply_migration():
   |
info: Searched in the following paths during module resolution:
info:   1. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend (first-party code)
info:   2. vendored://stdlib (stdlib typeshed stubs vendored by ty)
info:   3. /Users/kevinhill/.cache/uv/archive-v0/7K-TfEX3wTIQxRy2mUldM/lib/python3.12/site-packages (site-packages)
info:   4. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend/.venv/lib/python3.12/site-packages (site-packages)
info: make sure your Python environment is properly configured: https://docs.astral.sh/ty/modules/#python-environment
info: rule `unresolved-import` is enabled by default

error[invalid-context-manager]: Object of type `(...) -> _GeneratorContextManager[Unknown, None, None]` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
  --> scripts/apply_auth_migration.py:38:14
   |
36 |         # Run upgrade
37 |         print("\nApplying migration 030...")
38 |         with op.batch_alter_table as context:
   |              ^^^^^^^^^^^^^^^^^^^^
39 |             context.configure(connection=conn)
40 |             upgrade()
   |
info: rule `invalid-context-manager` is enabled by default

error[non-subscriptable]: Cannot subscript object of type `None` with no `__getitem__` method
   --> scripts/debug_settings.py:105:32
    |
103 |         # Supabase settings
104 |         supabase_settings = load_supabase_settings()
105 |         print(f"SUPABASE_URL: {supabase_settings.url[:50]}..." if len(supabase_settings.url) > 50 else f"SUPABASE_URL: {supabase_sett…
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^
106 |
107 |     except Exception as e:
    |
info: rule `non-subscriptable` is enabled by default

error[invalid-argument-type]: Argument to function `len` is incorrect
   --> scripts/debug_settings.py:105:71
    |
103 |         # Supabase settings
104 |         supabase_settings = load_supabase_settings()
105 |         print(f"SUPABASE_URL: {supabase_settings.url[:50]}..." if len(supabase_settings.url) > 50 else f"SUPABASE_URL: {supabase_sett…
    |                                                                       ^^^^^^^^^^^^^^^^^^^^^ Expected `Sized`, found `str | None`
106 |
107 |     except Exception as e:
    |
info: Element `None` of this union is not assignable to `Sized`
info: Function defined here
    --> stdlib/builtins.pyi:3757:5
     |
3755 |     """
3756 |
3757 | def len(obj: Sized, /) -> int:
     |     ^^^ ---------- Parameter declared here
3758 |     """Return the number of items in a container."""
     |
info: rule `invalid-argument-type` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> scripts/organize_docs.py:268:38
    |
267 |         # Track changes
268 |         self.changes: List[Dict[str, any]] = []
    |                                      ^^^
269 |
270 |     async def analyze_document(self, file_path: Path) -> Optional[DocumentAnalysis]:
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> scripts/organize_docs.py:424:69
    |
422 |         return "\n".join(new_lines)
423 |
424 |     async def organize_document(self, file_path: Path) -> Dict[str, any]:
    |                                                                     ^^^
425 |         """Organize a single document."""
426 |         print(f"{Colors.CYAN}📄 Analyzing: {file_path.name}{Colors.NC}")
    |
info: rule `invalid-type-form` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `Unknown | Path | (DocumentAnalysis & ~AlwaysFalsy) | bool | list[Unknown]`
   --> scripts/organize_docs.py:455:13
    |
453 |             archive_path = self.docs_dir / "archive" / file_path.name
454 |             change["new_path"] = archive_path
455 |             change["actions"].append(
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
456 |                 f"Archive to {archive_path.relative_to(self.docs_dir)}"
457 |             )
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `Unknown | Path | (DocumentAnalysis & ~AlwaysFalsy) | bool | list[Unknown]`
   --> scripts/organize_docs.py:460:13
    |
459 |         if needs_move and not should_archive:
460 |             change["actions"].append(f"Move to {new_path.relative_to(self.docs_dir)}")
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
461 |
462 |         if needs_metadata:
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `Unknown | Path | (DocumentAnalysis & ~AlwaysFalsy) | bool | list[Unknown]`
   --> scripts/organize_docs.py:463:13
    |
462 |         if needs_metadata:
463 |             change["actions"].append(
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
464 |                 f"Add metadata: {', '.join(analysis.missing_metadata)}"
465 |             )
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `(Unknown & ~AlwaysTruthy) | (DocumentAnalysis & ~AlwaysFalsy & ~AlwaysTruthy) | Literal[False] | (list[Unknown] & ~AlwaysTruthy)`
   --> scripts/organize_docs.py:468:13
    |
467 |         if not change["actions"]:
468 |             change["actions"].append("No changes needed")
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
469 |
470 |         # Print analysis
    |
info: rule `possibly-missing-attribute` is enabled by default

error[no-matching-overload]: No overload of bound method `join` matches arguments
   --> scripts/organize_docs.py:481:29
    |
479 |             print(f"  {color}⚠️  {status}{Colors.NC}")
480 |
481 |         print(f"  Actions: {', '.join(change['actions'])}")
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
482 |         print(f"  Reasoning: {analysis.reasoning}")
483 |         print()
    |
info: First overload defined here
    --> stdlib/builtins.pyi:1109:9
     |
1108 |     @overload
1109 |     def join(self: LiteralString, iterable: Iterable[LiteralString], /) -> LiteralString:
     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
1110 |         """Concatenate any number of strings.
     |
info: Possible overloads for bound method `join`:
info:   (self: LiteralString, iterable: Iterable[LiteralString], /) -> LiteralString
info:   (self, iterable: Iterable[str], /) -> str
info: rule `no-matching-overload` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> scripts/organize_docs.py:487:53
    |
485 |         return change
486 |
487 |     async def apply_changes(self, change: Dict[str, any]) -> bool:
    |                                                     ^^^
488 |         """Apply organizational changes to a document."""
489 |         if self.dry_run:
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-parameter-default]: Default value of type `None` is not assignable to annotated parameter type `list[str]`
   --> scripts/organize_docs.py:526:38
    |
525 |     async def organize_all(
526 |         self, pattern: str = "*.md", skip_dirs: List[str] = None
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
527 |     ) -> Dict[str, any]:
528 |         """Organize all matching documents."""
    |
info: rule `invalid-parameter-default` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> scripts/organize_docs.py:527:20
    |
525 |     async def organize_all(
526 |         self, pattern: str = "*.md", skip_dirs: List[str] = None
527 |     ) -> Dict[str, any]:
    |                    ^^^
528 |         """Organize all matching documents."""
529 |         skip_dirs = skip_dirs or ["archive", "external", ".git"]
    |
info: rule `invalid-type-form` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
   --> scripts/organize_docs.py:559:45
    |
557 |         return summary
558 |
559 |     def generate_summary(self) -> Dict[str, any]:
    |                                             ^^^
560 |         """Generate summary of all changes."""
561 |         total = len(self.changes)
    |
info: rule `invalid-type-form` is enabled by default

error[unresolved-import]: Cannot resolve imported module `organize_docs`
  --> scripts/organize_docs_batch.py:26:6
   |
24 |     sys.exit(1)
25 |
26 | from organize_docs import (
   |      ^^^^^^^^^^^^^
27 |     DocumentAnalysis,
28 |     DocumentOrganizer,
   |
info: Searched in the following paths during module resolution:
info:   1. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend (first-party code)
info:   2. vendored://stdlib (stdlib typeshed stubs vendored by ty)
info:   3. /Users/kevinhill/.cache/uv/archive-v0/7K-TfEX3wTIQxRy2mUldM/lib/python3.12/site-packages (site-packages)
info:   4. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend/.venv/lib/python3.12/site-packages (site-packages)
info: make sure your Python environment is properly configured: https://docs.astral.sh/ty/modules/#python-environment
info: rule `unresolved-import` is enabled by default

error[invalid-parameter-default]: Default value of type `None` is not assignable to annotated parameter type `str`
  --> scripts/organize_docs_batch.py:38:9
   |
36 |     def __init__(
37 |         self,
38 |         api_key: str = None,
   |         ^^^^^^^^^^^^^^^^^^^
39 |         base_url: str = None,
40 |         model: str = None,
   |
info: rule `invalid-parameter-default` is enabled by default

error[invalid-parameter-default]: Default value of type `None` is not assignable to annotated parameter type `str`
  --> scripts/organize_docs_batch.py:39:9
   |
37 |         self,
38 |         api_key: str = None,
39 |         base_url: str = None,
   |         ^^^^^^^^^^^^^^^^^^^^
40 |         model: str = None,
41 |         dry_run: bool = True,
   |
info: rule `invalid-parameter-default` is enabled by default

error[invalid-parameter-default]: Default value of type `None` is not assignable to annotated parameter type `str`
  --> scripts/organize_docs_batch.py:40:9
   |
38 |         api_key: str = None,
39 |         base_url: str = None,
40 |         model: str = None,
   |         ^^^^^^^^^^^^^^^^^
41 |         dry_run: bool = True,
42 |         max_concurrent: int = 50,
   |
info: rule `invalid-parameter-default` is enabled by default

error[invalid-parameter-default]: Default value of type `None` is not assignable to annotated parameter type `list[str]`
  --> scripts/organize_docs_batch.py:74:9
   |
72 |         self,
73 |         pattern: str = "*.md",
74 |         skip_dirs: List[str] = None,
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
75 |         show_progress: bool = True,
76 |     ) -> Dict[str, any]:
   |
info: rule `invalid-parameter-default` is enabled by default

error[invalid-type-form]: Variable of type `def any(iterable: Iterable[object], /) -> bool` is not allowed in a type expression
  --> scripts/organize_docs_batch.py:76:20
   |
74 |         skip_dirs: List[str] = None,
75 |         show_progress: bool = True,
76 |     ) -> Dict[str, any]:
   |                    ^^^
77 |         """Organize all documents in batch with fully parallel processing."""
78 |         skip_dirs = skip_dirs or ["archive", "external", ".git"]
   |
info: rule `invalid-type-form` is enabled by default

error[not-iterable]: Object of type `BaseException & ~Exception` is not iterable
   --> scripts/organize_docs_batch.py:126:35
    |
124 |                 continue
125 |
126 |             file_path, analysis = result
    |                                   ^^^^^^
127 |
128 |             if analysis:
    |
info: It doesn't have an `__iter__` method or a `__getitem__` method
info: rule `not-iterable` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `Unknown | bool | list[Unknown]`
   --> scripts/organize_docs_batch.py:146:21
    |
144 |                     archive_path = self.docs_dir / "archive" / file_path.name
145 |                     change["new_path"] = archive_path
146 |                     change["actions"].append(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^
147 |                         f"Archive to {archive_path.relative_to(self.docs_dir)}"
148 |                     )
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `Unknown | bool | list[Unknown]`
   --> scripts/organize_docs_batch.py:151:21
    |
150 |                 if change["needs_move"] and not change["should_archive"]:
151 |                     change["actions"].append(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^
152 |                         f"Move to {new_path.relative_to(self.docs_dir)}"
153 |                     )
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `Unknown | bool | list[Unknown]`
   --> scripts/organize_docs_batch.py:156:21
    |
155 |                 if change["needs_metadata"]:
156 |                     change["actions"].append(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^
157 |                         f"Add metadata: {', '.join(analysis.missing_metadata)}"
158 |                     )
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `append` may be missing on object of type `(Unknown & ~AlwaysTruthy) | Literal[False] | (list[Unknown] & ~AlwaysTruthy)`
   --> scripts/organize_docs_batch.py:161:21
    |
160 |                 if not change["actions"]:
161 |                     change["actions"].append("No changes needed")
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^
162 |
163 |                 changes.append(change)
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `get` may be missing on object of type `dict[Unknown, Unknown] | None`
   --> scripts/simulate_parallel_workflow.py:143:32
    |
141 |     print(f"✓ Created continuation task: {continuation.id}")
142 |     print(f"  Task type: {continuation.task_type}")
143 |     print(f"  Depends on: {len(continuation.dependencies.get('depends_on', []))} tasks")
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
144 |
145 |     # Merge results
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
  --> scripts/test_intelligent_monitoring.py:76:39
   |
74 |                 "success": success,
75 |                 "message": message,
76 |                 "timestamp": datetime.utcnow(),
   |                                       ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
77 |             }
78 |         )
   |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> scripts/test_intelligent_monitoring.py:385:45
    |
383 |                     phase_id="PHASE_IMPLEMENTATION",
384 |                     capacity=100,
385 |                     last_heartbeat=datetime.utcnow(),
    |                                             ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
386 |                 )
387 |                 session.add(test_agent)
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> scripts/test_intelligent_monitoring.py:396:45
    |
394 |                         log_type="input",
395 |                         message="Start implementing smoke test functionality",
396 |                         created_at=datetime.utcnow() - timedelta(minutes=30),
    |                                             ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
397 |                         details={"phase": "PHASE_IMPLEMENTATION"},
398 |                     ),
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> scripts/test_intelligent_monitoring.py:404:45
    |
402 |                         log_type="output",
403 |                         message="Created test models and services",
404 |                         created_at=datetime.utcnow() - timedelta(minutes=20),
    |                                             ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
405 |                         details={
406 |                             "files_created": ["models/test.py", "services/test.py"]
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> scripts/test_intelligent_monitoring.py:414:45
    |
412 |                         log_type="output",
413 |                         message="Working on test validation",
414 |                         created_at=datetime.utcnow() - timedelta(minutes=10),
    |                                             ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
415 |                         details={"current_focus": "test validation"},
416 |                     ),
    |
info: rule `deprecated` is enabled by default

error[unresolved-import]: Cannot resolve imported module `organize_docs`
 --> scripts/test_status_normalization.py:8:6
  |
6 | """
7 |
8 | from organize_docs import normalize_status, STATUS_NORMALIZATION_MAP, ALLOWED_STATUSES
  |      ^^^^^^^^^^^^^
  |
info: Searched in the following paths during module resolution:
info:   1. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend (first-party code)
info:   2. vendored://stdlib (stdlib typeshed stubs vendored by ty)
info:   3. /Users/kevinhill/.cache/uv/archive-v0/7K-TfEX3wTIQxRy2mUldM/lib/python3.12/site-packages (site-packages)
info:   4. /Users/kevinhill/Coding/Experiments/senior-sandbox/senior_sandbox/backend/.venv/lib/python3.12/site-packages (site-packages)
info: make sure your Python environment is properly configured: https://docs.astral.sh/ty/modules/#python-environment
info: rule `unresolved-import` is enabled by default

error[call-non-callable]: Object of type `object` is not callable
   --> scripts/validate_config.py:127:17
    |
125 |         for name, loader in settings_loaders:
126 |             try:
127 |                 loader.cache_clear() if hasattr(loader, 'cache_clear') else None
    |                 ^^^^^^^^^^^^^^^^^^^^
128 |                 settings = loader()
129 |                 # Successfully loaded
    |
info: rule `call-non-callable` is enabled by default

warning[possibly-missing-attribute]: Attribute `id` may be missing on object of type `Task | None`
   --> tests/test_05_e2e_minimal.py:255:16
    |
253 |         # Verify priority ordering
254 |         next_task = task_queue_service.get_next_task("PHASE_REQUIREMENTS")
255 |         assert next_task.id == task1.id  # HIGH priority first
    |                ^^^^^^^^^^^^
    |
info: rule `possibly-missing-attribute` is enabled by default

error[unknown-argument]: Argument `interval_seconds` does not match any known parameter of bound method `__init__`
   --> tests/test_agent_health.py:259:85
    |
257 |         """Test HeartbeatManager initialization."""
258 |         mock_health_service = Mock(spec=AgentHealthService)
259 |         heartbeat_manager = HeartbeatManager("test-agent-123", mock_health_service, interval_seconds=1)
    |                                                                                     ^^^^^^^^^^^^^^^^^^
260 |
261 |         assert heartbeat_manager.agent_id == "test-agent-123"
    |
info: Method signature here
  --> omoi_os/worker.py:43:9
   |
41 |       HIGH_LOAD_INTERVAL = 10  # Under high load: 10s
42 |
43 |       def __init__(
   |  _________^
44 | |         self,
45 | |         agent_id: str,
46 | |         heartbeat_protocol_service,
47 | |         current_task_id: Optional[str] = None,
48 | |         get_agent_status: Optional[callable] = None,
49 | |         collect_health_metrics: Optional[callable] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize HeartbeatManager.
   |
info: rule `unknown-argument` is enabled by default

error[unresolved-attribute]: Object of type `HeartbeatManager` has no attribute `health_service`
   --> tests/test_agent_health.py:262:16
    |
261 |         assert heartbeat_manager.agent_id == "test-agent-123"
262 |         assert heartbeat_manager.health_service == mock_health_service
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
263 |         assert heartbeat_manager.interval_seconds == 1
264 |         assert heartbeat_manager._running is False
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `HeartbeatManager` has no attribute `interval_seconds`
   --> tests/test_agent_health.py:263:16
    |
261 |         assert heartbeat_manager.agent_id == "test-agent-123"
262 |         assert heartbeat_manager.health_service == mock_health_service
263 |         assert heartbeat_manager.interval_seconds == 1
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
264 |         assert heartbeat_manager._running is False
265 |         assert heartbeat_manager._thread is None
    |
info: rule `unresolved-attribute` is enabled by default

error[unknown-argument]: Argument `interval_seconds` does not match any known parameter of bound method `__init__`
   --> tests/test_agent_health.py:271:85
    |
269 |         """Test starting the heartbeat manager."""
270 |         mock_health_service = Mock(spec=AgentHealthService)
271 |         heartbeat_manager = HeartbeatManager("test-agent-123", mock_health_service, interval_seconds=1)
    |                                                                                     ^^^^^^^^^^^^^^^^^^
272 |
273 |         mock_thread_instance = Mock()
    |
info: Method signature here
  --> omoi_os/worker.py:43:9
   |
41 |       HIGH_LOAD_INTERVAL = 10  # Under high load: 10s
42 |
43 |       def __init__(
   |  _________^
44 | |         self,
45 | |         agent_id: str,
46 | |         heartbeat_protocol_service,
47 | |         current_task_id: Optional[str] = None,
48 | |         get_agent_status: Optional[callable] = None,
49 | |         collect_health_metrics: Optional[callable] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize HeartbeatManager.
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `interval_seconds` does not match any known parameter of bound method `__init__`
   --> tests/test_agent_health.py:285:85
    |
283 |         """Test stopping the heartbeat manager."""
284 |         mock_health_service = Mock(spec=AgentHealthService)
285 |         heartbeat_manager = HeartbeatManager("test-agent-123", mock_health_service, interval_seconds=1)
    |                                                                                     ^^^^^^^^^^^^^^^^^^
286 |
287 |         heartbeat_manager._running = True
    |
info: Method signature here
  --> omoi_os/worker.py:43:9
   |
41 |       HIGH_LOAD_INTERVAL = 10  # Under high load: 10s
42 |
43 |       def __init__(
   |  _________^
44 | |         self,
45 | |         agent_id: str,
46 | |         heartbeat_protocol_service,
47 | |         current_task_id: Optional[str] = None,
48 | |         get_agent_status: Optional[callable] = None,
49 | |         collect_health_metrics: Optional[callable] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize HeartbeatManager.
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `interval_seconds` does not match any known parameter of bound method `__init__`
   --> tests/test_agent_health.py:301:85
    |
299 |         """Test successful heartbeat loop."""
300 |         mock_health_service = Mock(spec=AgentHealthService)
301 |         heartbeat_manager = HeartbeatManager("test-agent-123", mock_health_service, interval_seconds=1)
    |                                                                                     ^^^^^^^^^^^^^^^^^^
302 |
303 |         mock_health_service.emit_heartbeat.return_value = True
    |
info: Method signature here
  --> omoi_os/worker.py:43:9
   |
41 |       HIGH_LOAD_INTERVAL = 10  # Under high load: 10s
42 |
43 |       def __init__(
   |  _________^
44 | |         self,
45 | |         agent_id: str,
46 | |         heartbeat_protocol_service,
47 | |         current_task_id: Optional[str] = None,
48 | |         get_agent_status: Optional[callable] = None,
49 | |         collect_health_metrics: Optional[callable] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize HeartbeatManager.
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `interval_seconds` does not match any known parameter of bound method `__init__`
   --> tests/test_agent_health.py:325:85
    |
323 |         """Test heartbeat loop when agent not found."""
324 |         mock_health_service = Mock(spec=AgentHealthService)
325 |         heartbeat_manager = HeartbeatManager("test-agent-123", mock_health_service, interval_seconds=1)
    |                                                                                     ^^^^^^^^^^^^^^^^^^
326 |
327 |         mock_health_service.emit_heartbeat.return_value = False
    |
info: Method signature here
  --> omoi_os/worker.py:43:9
   |
41 |       HIGH_LOAD_INTERVAL = 10  # Under high load: 10s
42 |
43 |       def __init__(
   |  _________^
44 | |         self,
45 | |         agent_id: str,
46 | |         heartbeat_protocol_service,
47 | |         current_task_id: Optional[str] = None,
48 | |         get_agent_status: Optional[callable] = None,
49 | |         collect_health_metrics: Optional[callable] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize HeartbeatManager.
   |
info: rule `unknown-argument` is enabled by default

error[unknown-argument]: Argument `interval_seconds` does not match any known parameter of bound method `__init__`
   --> tests/test_agent_health.py:345:85
    |
343 |         """Test heartbeat loop exception handling."""
344 |         mock_health_service = Mock(spec=AgentHealthService)
345 |         heartbeat_manager = HeartbeatManager("test-agent-123", mock_health_service, interval_seconds=1)
    |                                                                                     ^^^^^^^^^^^^^^^^^^
346 |
347 |         mock_health_service.emit_heartbeat.side_effect = Exception("Database error")
    |
info: Method signature here
  --> omoi_os/worker.py:43:9
   |
41 |       HIGH_LOAD_INTERVAL = 10  # Under high load: 10s
42 |
43 |       def __init__(
   |  _________^
44 | |         self,
45 | |         agent_id: str,
46 | |         heartbeat_protocol_service,
47 | |         current_task_id: Optional[str] = None,
48 | |         get_agent_status: Optional[callable] = None,
49 | |         collect_health_metrics: Optional[callable] = None,
50 | |     ):
   | |_____^
51 |           """
52 |           Initialize HeartbeatManager.
   |
info: rule `unknown-argument` is enabled by default

warning[possibly-missing-attribute]: Attribute `capabilities` may be missing on object of type `Agent | None`
  --> tests/test_agent_registry.py:84:12
   |
82 |     )
83 |
84 |     assert updated.capabilities == ["analysis", "python"]
   |            ^^^^^^^^^^^^^^^^^^^^
85 |     mock_event_bus.publish.assert_called_once()
86 |     event = mock_event_bus.publish.call_args[0][0]
   |
info: rule `possibly-missing-attribute` is enabled by default

error[unresolved-attribute]: Object of type `FromClause` has no attribute `create`
  --> tests/test_auth_service.py:29:29
   |
27 |     async with engine.begin() as conn:
28 |         # Only create tables needed for auth testing
29 |         await conn.run_sync(User.__table__.create, checkfirst=True)
   |                             ^^^^^^^^^^^^^^^^^^^^^
30 |         await conn.run_sync(Session.__table__.create, checkfirst=True)
31 |         await conn.run_sync(APIKey.__table__.create, checkfirst=True)
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `FromClause` has no attribute `create`
  --> tests/test_auth_service.py:30:29
   |
28 |         # Only create tables needed for auth testing
29 |         await conn.run_sync(User.__table__.create, checkfirst=True)
30 |         await conn.run_sync(Session.__table__.create, checkfirst=True)
   |                             ^^^^^^^^^^^^^^^^^^^^^^^^
31 |         await conn.run_sync(APIKey.__table__.create, checkfirst=True)
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `FromClause` has no attribute `create`
  --> tests/test_auth_service.py:31:29
   |
29 |         await conn.run_sync(User.__table__.create, checkfirst=True)
30 |         await conn.run_sync(Session.__table__.create, checkfirst=True)
31 |         await conn.run_sync(APIKey.__table__.create, checkfirst=True)
   |                             ^^^^^^^^^^^^^^^^^^^^^^^
32 |     
33 |     yield engine
   |
info: rule `unresolved-attribute` is enabled by default

error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
  --> tests/test_auth_unit.py:30:9
   |
28 |     """Create AuthService instance with mock DB."""
29 |     return AuthService(
30 |         db=MockDB(),
   |         ^^^^^^^^^^^ Expected `AsyncSession`, found `MockDB`
31 |         jwt_secret=TEST_JWT_SECRET,
32 |         jwt_algorithm="HS256",
   |
info: Method defined here
  --> omoi_os/services/auth_service.py:32:9
   |
30 |     """Service for authentication operations."""
31 |
32 |     def __init__(
   |         ^^^^^^^^
33 |         self,
34 |         db: AsyncSession,
   |         ---------------- Parameter declared here
35 |         jwt_secret: str,
36 |         jwt_algorithm: str = "HS256",
   |
info: rule `invalid-argument-type` is enabled by default

error[unresolved-attribute]: Object of type `FromClause` has no attribute `create`
  --> tests/test_authorization_service.py:26:29
   |
24 |     async with engine.begin() as conn:
25 |         # Only create tables needed for authorization testing
26 |         await conn.run_sync(User.__table__.create, checkfirst=True)
   |                             ^^^^^^^^^^^^^^^^^^^^^
27 |         await conn.run_sync(Organization.__table__.create, checkfirst=True)
28 |         await conn.run_sync(Role.__table__.create, checkfirst=True)
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `FromClause` has no attribute `create`
  --> tests/test_authorization_service.py:27:29
   |
25 |         # Only create tables needed for authorization testing
26 |         await conn.run_sync(User.__table__.create, checkfirst=True)
27 |         await conn.run_sync(Organization.__table__.create, checkfirst=True)
   |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
28 |         await conn.run_sync(Role.__table__.create, checkfirst=True)
29 |         await conn.run_sync(OrganizationMembership.__table__.create, checkfirst=True)
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `FromClause` has no attribute `create`
  --> tests/test_authorization_service.py:28:29
   |
26 |         await conn.run_sync(User.__table__.create, checkfirst=True)
27 |         await conn.run_sync(Organization.__table__.create, checkfirst=True)
28 |         await conn.run_sync(Role.__table__.create, checkfirst=True)
   |                             ^^^^^^^^^^^^^^^^^^^^^
29 |         await conn.run_sync(OrganizationMembership.__table__.create, checkfirst=True)
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `FromClause` has no attribute `create`
  --> tests/test_authorization_service.py:29:29
   |
27 |         await conn.run_sync(Organization.__table__.create, checkfirst=True)
28 |         await conn.run_sync(Role.__table__.create, checkfirst=True)
29 |         await conn.run_sync(OrganizationMembership.__table__.create, checkfirst=True)
   |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
30 |     
31 |     yield engine
   |
info: rule `unresolved-attribute` is enabled by default

error[invalid-argument-type]: Argument to bound method `__init__` is incorrect
  --> tests/test_authorization_unit.py:19:33
   |
17 | def auth_service():
18 |     """Create AuthorizationService instance with mock DB."""
19 |     return AuthorizationService(db=MockDB())
   |                                 ^^^^^^^^^^^ Expected `AsyncSession`, found `MockDB`
   |
info: Method defined here
  --> omoi_os/services/authorization_service.py:25:9
   |
23 |     """Service for authorization and permission checking."""
24 |
25 |     def __init__(self, db: AsyncSession):
   |         ^^^^^^^^       ---------------- Parameter declared here
26 |         self.db = db
   |
info: rule `invalid-argument-type` is enabled by default

error[not-iterable]: Object of type `CoroutineType[Any, Any, ContextSummary]` is not iterable
   --> tests/test_context_passing.py:116:57
    |
114 |     assert "Scope creep" in summary
115 |     key_points = summarizer.extract_key_points(context)
116 |     assert any("decision" in point.lower() for point in key_points)
    |                                                         ^^^^^^^^^^
    |
info: It doesn't have an `__iter__` method or a `__getitem__` method
info: rule `not-iterable` is enabled by default

error[unresolved-attribute]: Object of type `CoroutineType[Any, Any, DiagnosticRun]` has no attribute `workflow_id`
   --> tests/test_diagnostic_runs.py:217:12
    |
216 |     assert diagnostic_run is not None
217 |     assert diagnostic_run.workflow_id == sample_ticket.id
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
218 |     assert diagnostic_run.total_tasks_at_trigger == 5
219 |     assert diagnostic_run.done_tasks_at_trigger == 5
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `CoroutineType[Any, Any, DiagnosticRun]` has no attribute `total_tasks_at_trigger`
   --> tests/test_diagnostic_runs.py:218:12
    |
216 |     assert diagnostic_run is not None
217 |     assert diagnostic_run.workflow_id == sample_ticket.id
218 |     assert diagnostic_run.total_tasks_at_trigger == 5
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
219 |     assert diagnostic_run.done_tasks_at_trigger == 5
220 |     assert diagnostic_run.status == "created"
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `CoroutineType[Any, Any, DiagnosticRun]` has no attribute `done_tasks_at_trigger`
   --> tests/test_diagnostic_runs.py:219:12
    |
217 |     assert diagnostic_run.workflow_id == sample_ticket.id
218 |     assert diagnostic_run.total_tasks_at_trigger == 5
219 |     assert diagnostic_run.done_tasks_at_trigger == 5
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
220 |     assert diagnostic_run.status == "created"
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `CoroutineType[Any, Any, DiagnosticRun]` has no attribute `status`
   --> tests/test_diagnostic_runs.py:220:12
    |
218 |     assert diagnostic_run.total_tasks_at_trigger == 5
219 |     assert diagnostic_run.done_tasks_at_trigger == 5
220 |     assert diagnostic_run.status == "created"
    |            ^^^^^^^^^^^^^^^^^^^^^
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `CoroutineType[Any, Any, DiagnosticRun]` has no attribute `id`
   --> tests/test_diagnostic_runs.py:266:16
    |
264 |     # Complete it
265 |     completed = diagnostic_service.complete_diagnostic_run(
266 |         run_id=diagnostic_run.id,
    |                ^^^^^^^^^^^^^^^^^
267 |         tasks_created=["task-1", "task-2"],
268 |         diagnosis="Workflow missing result submission",
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `CoroutineType[Any, Any, DiagnosticRun]` has no attribute `id`
   --> tests/test_diagnostic_runs.py:295:26
    |
293 |     assert len(runs) == 2
294 |     # Should be sorted by most recent first
295 |     assert runs[0].id == run2.id
    |                          ^^^^^^^
296 |     assert runs[1].id == run1.id
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `CoroutineType[Any, Any, DiagnosticRun]` has no attribute `id`
   --> tests/test_diagnostic_runs.py:296:26
    |
294 |     # Should be sorted by most recent first
295 |     assert runs[0].id == run2.id
296 |     assert runs[1].id == run1.id
    |                          ^^^^^^^
    |
info: rule `unresolved-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `ticket_id` may be missing on object of type `(Unknown & ~None) | list[Task]`
   --> tests/test_diagnostic_runs.py:324:12
    |
322 |     # Verify task was created
323 |     assert recovery_task is not None
324 |     assert recovery_task.ticket_id == sample_ticket.id
    |            ^^^^^^^^^^^^^^^^^^^^^^^
325 |     assert recovery_task.priority == "HIGH"
326 |     assert "Diagnostic recovery" in recovery_task.description
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `priority` may be missing on object of type `(Unknown & ~None) | list[Task]`
   --> tests/test_diagnostic_runs.py:325:12
    |
323 |     assert recovery_task is not None
324 |     assert recovery_task.ticket_id == sample_ticket.id
325 |     assert recovery_task.priority == "HIGH"
    |            ^^^^^^^^^^^^^^^^^^^^^^
326 |     assert "Diagnostic recovery" in recovery_task.description
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `description` may be missing on object of type `(Unknown & ~None) | list[Task]`
   --> tests/test_diagnostic_runs.py:326:37
    |
324 |     assert recovery_task.ticket_id == sample_ticket.id
325 |     assert recovery_task.priority == "HIGH"
326 |     assert "Diagnostic recovery" in recovery_task.description
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
info: rule `possibly-missing-attribute` is enabled by default

error[unresolved-attribute]: Object of type `str` has no attribute `message`
  --> tests/test_fireworks.py:74:30
   |
72 |         )
73 |         print("✅ Structured output test passed:")
74 |         print(f"   Message: {result.output.message}")
   |                              ^^^^^^^^^^^^^^^^^^^^^
75 |         print(f"   Confidence: {result.output.confidence}")
76 |     except Exception as e:
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `str` has no attribute `confidence`
  --> tests/test_fireworks.py:75:33
   |
73 |         print("✅ Structured output test passed:")
74 |         print(f"   Message: {result.output.message}")
75 |         print(f"   Confidence: {result.output.confidence}")
   |                                 ^^^^^^^^^^^^^^^^^^^^^^^^
76 |     except Exception as e:
77 |         print(
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `str` has no attribute `message`
   --> tests/test_fireworks.py:104:30
    |
102 |         )
103 |         print("✅ Async test passed:")
104 |         print(f"   Message: {result.output.message}")
    |                              ^^^^^^^^^^^^^^^^^^^^^
105 |         print(f"   Confidence: {result.output.confidence}")
106 |     except Exception as e:
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `str` has no attribute `confidence`
   --> tests/test_fireworks.py:105:33
    |
103 |         print("✅ Async test passed:")
104 |         print(f"   Message: {result.output.message}")
105 |         print(f"   Confidence: {result.output.confidence}")
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^
106 |     except Exception as e:
107 |         print(f"❌ Async test failed: {e}")
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `str` has no attribute `memory_type`
   --> tests/test_fireworks.py:138:34
    |
137 |         print("✅ Service integration test passed:")
138 |         print(f"   Memory Type: {result.output.memory_type}")
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^
139 |         print(f"   Confidence: {result.output.confidence}")
140 |         print(f"   Reasoning: {result.output.reasoning}")
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `str` has no attribute `confidence`
   --> tests/test_fireworks.py:139:33
    |
137 |         print("✅ Service integration test passed:")
138 |         print(f"   Memory Type: {result.output.memory_type}")
139 |         print(f"   Confidence: {result.output.confidence}")
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^
140 |         print(f"   Reasoning: {result.output.reasoning}")
141 |         return True
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `str` has no attribute `reasoning`
   --> tests/test_fireworks.py:140:32
    |
138 |         print(f"   Memory Type: {result.output.memory_type}")
139 |         print(f"   Confidence: {result.output.confidence}")
140 |         print(f"   Reasoning: {result.output.reasoning}")
    |                                ^^^^^^^^^^^^^^^^^^^^^^^
141 |         return True
142 |     except Exception as e:
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `AgentRunResult[str]` has no attribute `data`
  --> tests/test_gateway_simple.py:14:38
   |
12 |     agent = Agent("gateway/anthropic:claude-sonnet-4-5")
13 |     result = agent.run_sync("Hello world!")
14 |     print(f"✅ Gateway format works: {result.data}")
   |                                       ^^^^^^^^^^^
15 | except Exception as e:
16 |     print(f"❌ Gateway format failed: {e}")
   |
info: rule `unresolved-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `audit_log` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:127:12
    |
125 |     )
126 |
127 |     assert action.audit_log is not None
    |            ^^^^^^^^^^^^^^^^
128 |     assert "before" in action.audit_log
129 |     assert "after" in action.audit_log
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `audit_log` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:128:24
    |
127 |     assert action.audit_log is not None
128 |     assert "before" in action.audit_log
    |                        ^^^^^^^^^^^^^^^^
129 |     assert "after" in action.audit_log
130 |     assert action.audit_log["before"]["status"] == "running"
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `audit_log` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:129:23
    |
127 |     assert action.audit_log is not None
128 |     assert "before" in action.audit_log
129 |     assert "after" in action.audit_log
    |                       ^^^^^^^^^^^^^^^^
130 |     assert action.audit_log["before"]["status"] == "running"
131 |     assert action.audit_log["after"]["status"] == "failed"
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `audit_log` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:130:12
    |
128 |     assert "before" in action.audit_log
129 |     assert "after" in action.audit_log
130 |     assert action.audit_log["before"]["status"] == "running"
    |            ^^^^^^^^^^^^^^^^
131 |     assert action.audit_log["after"]["status"] == "failed"
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `audit_log` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:131:12
    |
129 |     assert "after" in action.audit_log
130 |     assert action.audit_log["before"]["status"] == "running"
131 |     assert action.audit_log["after"]["status"] == "failed"
    |            ^^^^^^^^^^^^^^^^
    |
info: rule `possibly-missing-attribute` is enabled by default

error[non-subscriptable]: Cannot subscript object of type `None` with no `__getitem__` method
   --> tests/test_guardian.py:260:12
    |
258 |     assert action is not None
259 |     assert action.action_type == "override_priority"
260 |     assert action.audit_log["old_priority"] == "MEDIUM"
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
261 |     assert action.audit_log["new_priority"] == "CRITICAL"
    |
info: rule `non-subscriptable` is enabled by default

error[non-subscriptable]: Cannot subscript object of type `None` with no `__getitem__` method
   --> tests/test_guardian.py:261:12
    |
259 |     assert action.action_type == "override_priority"
260 |     assert action.audit_log["old_priority"] == "MEDIUM"
261 |     assert action.audit_log["new_priority"] == "CRITICAL"
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
262 |
263 |     # Verify priority was changed
    |
info: rule `non-subscriptable` is enabled by default

warning[possibly-missing-attribute]: Attribute `reverted_at` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:320:12
    |
318 |     )
319 |
320 |     assert action.reverted_at is None
    |            ^^^^^^^^^^^^^^^^^^
321 |
322 |     # Now revert it
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `id` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:324:19
    |
322 |     # Now revert it
323 |     success = guardian_service.revert_intervention(
324 |         action_id=action.id,
    |                   ^^^^^^^^^
325 |         reason="Crisis resolved, restoring normal operation",
326 |         initiated_by=guardian_agent.id,
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `id` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:333:55
    |
331 |     # Verify reversion was recorded
332 |     with db_service.get_session() as session:
333 |         reverted_action = session.get(GuardianAction, action.id)
    |                                                       ^^^^^^^^^
334 |         assert reverted_action.reverted_at is not None
335 |         assert "revert_reason" in reverted_action.audit_log
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `id` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:367:19
    |
366 |     guardian_service.revert_intervention(
367 |         action_id=action.id,
    |                   ^^^^^^^^^
368 |         reason="First revert",
369 |         initiated_by=guardian_agent.id,
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `id` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:374:19
    |
372 |     # Try to revert again
373 |     success = guardian_service.revert_intervention(
374 |         action_id=action.id,
    |                   ^^^^^^^^^
375 |         reason="Second revert",
376 |         initiated_by=guardian_agent.id,
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `id` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:459:45
    |
457 |     )
458 |
459 |     retrieved = guardian_service.get_action(action.id)
    |                                             ^^^^^^^^^
460 |
461 |     assert retrieved is not None
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `id` may be missing on object of type `GuardianAction | None`
   --> tests/test_guardian.py:462:28
    |
461 |     assert retrieved is not None
462 |     assert retrieved.id == action.id
    |                            ^^^^^^^^^
463 |     assert retrieved.action_type == "cancel_task"
464 |     assert retrieved.target_entity == running_task.id
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
  --> tests/test_intelligent_monitoring.py:62:33
   |
60 |         phase_id="PHASE_IMPLEMENTATION",
61 |         capacity=100,
62 |         last_heartbeat=datetime.utcnow(),
   |                                 ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
63 |     )
   |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
  --> tests/test_intelligent_monitoring.py:91:33
   |
89 |             log_type="input",
90 |             message="Start implementing user authentication",
91 |             created_at=datetime.utcnow() - timedelta(minutes=30),
   |                                 ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
92 |             details={"phase": "PHASE_IMPLEMENTATION"},
93 |         ),
   |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:99:33
    |
 97 |             log_type="output",
 98 |             message="Created user model with email and password fields",
 99 |             created_at=datetime.utcnow() - timedelta(minutes=25),
    |                                 ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
100 |             details={"files_created": ["models/user.py"]},
101 |         ),
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:107:33
    |
105 |             log_type="output",
106 |             message="Implemented JWT token generation and validation",
107 |             created_at=datetime.utcnow() - timedelta(minutes=20),
    |                                 ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
108 |             details={"files_created": ["services/auth.py"]},
109 |         ),
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:115:33
    |
113 |             log_type="output",
114 |             message="Working on login endpoint authentication",
115 |             created_at=datetime.utcnow() - timedelta(minutes=10),
    |                                 ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
116 |             details={"current_focus": "login endpoint"},
117 |         ),
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:242:33
    |
240 |             log_type="output",
241 |             message="Recent activity",
242 |             created_at=datetime.utcnow() - timedelta(minutes=1),
    |                                 ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
243 |         )
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:384:35
    |
382 |         trajectory_context.context_cache["test-agent"] = {
383 |             "context": {"test": "data"},
384 |             "timestamp": datetime.utcnow(),
    |                                   ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
385 |         }
    |
info: rule `deprecated` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:394:35
    |
392 |         trajectory_context.context_cache["test-agent"] = {
393 |             "context": {"test": "data"},
394 |             "timestamp": datetime.utcnow(),
    |                                   ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
395 |         }
396 |         trajectory_context.clear_cache()
    |
info: rule `deprecated` is enabled by default

error[invalid-argument-type]: Argument to bound method `_detect_duplicates` is incorrect
   --> tests/test_intelligent_monitoring.py:714:55
    |
712 |         ):
713 |             conductor = ConductorService(mock_db, llm_service=mock_llm_service)
714 |             duplicates = conductor._detect_duplicates(None, analyses)
    |                                                       ^^^^ Expected `Session`, found `None`
715 |
716 |             assert len(duplicates) == 0
    |
info: Method defined here
   --> omoi_os/services/conductor.py:346:9
    |
344 |         return max(0.0, balance_score)
345 |
346 |     def _detect_duplicates(
    |         ^^^^^^^^^^^^^^^^^^
347 |         self, session: Session, guardian_analyses: List[Dict[str, Any]]
    |               ---------------- Parameter declared here
348 |     ) -> List[DuplicateDetection]:
349 |         """Detect duplicate work across agents using LLM analysis."""
    |
info: rule `invalid-argument-type` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:727:44
    |
725 |         mock_result1.system_status = "optimal"
726 |         mock_result1.coherence_score = 0.9
727 |         mock_result1.created_at = datetime.utcnow()
    |                                            ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
728 |
729 |         # Mock execute results
    |
info: rule `deprecated` is enabled by default

warning[possibly-missing-attribute]: Attribute `agent_id` may be missing on object of type `TrajectoryAnalysisResponse | None`
   --> tests/test_intelligent_monitoring.py:905:20
    |
903 |             response = await monitoring_loop.analyze_agent_trajectory("test-agent")
904 |
905 |             assert response.agent_id == "test-agent"
    |                    ^^^^^^^^^^^^^^^^^
906 |             assert response.alignment_score == 0.9
907 |             assert (
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `alignment_score` may be missing on object of type `TrajectoryAnalysisResponse | None`
   --> tests/test_intelligent_monitoring.py:906:20
    |
905 |             assert response.agent_id == "test-agent"
906 |             assert response.alignment_score == 0.9
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^
907 |             assert (
908 |                 response.health_score == 0.9
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[possibly-missing-attribute]: Attribute `health_score` may be missing on object of type `TrajectoryAnalysisResponse | None`
   --> tests/test_intelligent_monitoring.py:908:17
    |
906 |             assert response.alignment_score == 0.9
907 |             assert (
908 |                 response.health_score == 0.9
    |                 ^^^^^^^^^^^^^^^^^^^^^
909 |             )  # Should equal alignment_score when no penalties
    |
info: rule `possibly-missing-attribute` is enabled by default

warning[deprecated]: The function `utcnow` is deprecated
   --> tests/test_intelligent_monitoring.py:964:54
    |
962 |         monitoring_loop.failed_cycles = 2
963 |         monitoring_loop.total_interventions = 3
964 |         monitoring_loop.last_guardian_run = datetime.utcnow()
    |                                                      ^^^^^^ Use timezone-aware objects to represent datetimes in UTC; e.g. by calling .now(datetime.timezone.utc)
965 |
966 |         status = monitoring_loop.get_status()
    |
info: rule `deprecated` is enabled by default

error[invalid-argument-type]: Argument to bound method `get_task_context` is incorrect
   --> tests/test_memory.py:342:13
    |
340 |         context = memory_service.get_task_context(
341 |             session=session,
342 |             task_description=new_task.description,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
343 |             top_k=3,
344 |         )
    |
info: Element `None` of this union is not assignable to `str`
info: Method defined here
   --> omoi_os/services/memory.py:517:9
    |
515 |         return combined_results
516 |
517 |     def get_task_context(
    |         ^^^^^^^^^^^^^^^^
518 |         self,
519 |         session: Session,
520 |         task_description: str,
    |         --------------------- Parameter declared here
521 |         top_k: int = 3,
522 |     ) -> Dict[str, Any]:
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to function `len` is incorrect
  --> tests/test_pattern_learning.py:85:20
   |
83 |         assert pattern.confidence_score > 0.0
84 |         assert pattern.usage_count == 0
85 |         assert len(pattern.success_indicators) > 0
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `Sized`, found `list[str] | None`
   |
info: Element `None` of this union is not assignable to `Sized`
info: Function defined here
    --> stdlib/builtins.pyi:3757:5
     |
3755 |     """
3756 |
3757 | def len(obj: Sized, /) -> int:
     |     ^^^ ---------- Parameter declared here
3758 |     """Return the number of items in a container."""
     |
info: rule `invalid-argument-type` is enabled by default

error[unresolved-attribute]: Object of type `AgentRunResult[str]` has no attribute `data`
  --> tests/test_pydantic_ai_gateway.py:49:68
   |
47 |                     agent = Agent(model_str)
48 |                     result = agent.run_sync("Say hello in one sentence.")
49 |                     print(f"✅ Basic test passed with {model_str}: {result.data}")
   |                                                                     ^^^^^^^^^^^
50 |                     return True
51 |                 except Exception as e:
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `AgentRunResult[str]` has no attribute `data`
  --> tests/test_pydantic_ai_gateway.py:81:68
   |
79 |                     agent = Agent(model)
80 |                     result = agent.run_sync("Say hello in one sentence.")
81 |                     print(f"✅ infer_model works with {model_str}: {result.data}")
   |                                                                     ^^^^^^^^^^^
82 |                     return True
83 |                 except Exception as e:
   |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `AgentRunResult[str]` has no attribute `data`
   --> tests/test_pydantic_ai_gateway.py:167:34
    |
166 |         print("✅ Service integration test passed:")
167 |         print(f"   Memory Type: {result.data.memory_type}")
    |                                  ^^^^^^^^^^^
168 |         print(f"   Confidence: {result.data.confidence}")
169 |         print(f"   Reasoning: {result.data.reasoning}")
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `AgentRunResult[str]` has no attribute `data`
   --> tests/test_pydantic_ai_gateway.py:168:33
    |
166 |         print("✅ Service integration test passed:")
167 |         print(f"   Memory Type: {result.data.memory_type}")
168 |         print(f"   Confidence: {result.data.confidence}")
    |                                 ^^^^^^^^^^^
169 |         print(f"   Reasoning: {result.data.reasoning}")
170 |         return True
    |
info: rule `unresolved-attribute` is enabled by default

error[unresolved-attribute]: Object of type `AgentRunResult[str]` has no attribute `data`
   --> tests/test_pydantic_ai_gateway.py:169:32
    |
167 |         print(f"   Memory Type: {result.data.memory_type}")
168 |         print(f"   Confidence: {result.data.confidence}")
169 |         print(f"   Reasoning: {result.data.reasoning}")
    |                                ^^^^^^^^^^^
170 |         return True
171 |     except Exception as e:
    |
info: rule `unresolved-attribute` is enabled by default

error[invalid-assignment]: Implicit shadowing of function `publish`
   --> tests/test_ticket_approval.py:443:9
    |
441 |         # Replace event bus publish with our capture function
442 |         original_publish = event_bus_service.publish
443 |         event_bus_service.publish = Mock(side_effect=capture_event)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
444 |
445 |         try:
    |
info: Annotate to make it explicit if this is intentional
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Implicit shadowing of function `publish`
   --> tests/test_ticket_approval.py:457:13
    |
455 |             assert event.payload["approver_id"] == "human-123"
456 |         finally:
457 |             event_bus_service.publish = original_publish
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
458 |
459 |     def test_reject_ticket_publishes_event(
    |
info: Annotate to make it explicit if this is intentional
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Implicit shadowing of function `publish`
   --> tests/test_ticket_approval.py:474:9
    |
472 |         # Replace event bus publish with our capture function
473 |         original_publish = event_bus_service.publish
474 |         event_bus_service.publish = Mock(side_effect=capture_event)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
475 |
476 |         try:
    |
info: Annotate to make it explicit if this is intentional
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Implicit shadowing of function `publish`
   --> tests/test_ticket_approval.py:491:13
    |
489 |             assert event.payload["rejector_id"] == "human-123"
490 |         finally:
491 |             event_bus_service.publish = original_publish
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
492 |
493 |     def test_create_ticket_with_approval_publishes_event(
    |
info: Annotate to make it explicit if this is intentional
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Implicit shadowing of function `publish`
   --> tests/test_ticket_approval.py:508:9
    |
506 |         # Replace event bus publish with our capture function
507 |         original_publish = event_bus_service.publish
508 |         event_bus_service.publish = Mock(side_effect=capture_event)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^
509 |
510 |         try:
    |
info: Annotate to make it explicit if this is intentional
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Implicit shadowing of function `publish`
   --> tests/test_ticket_approval.py:548:13
    |
546 |                 assert ticket.id is not None
547 |         finally:
548 |             event_bus_service.publish = original_publish
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
info: Annotate to make it explicit if this is intentional
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Object of type `def mock_publish(event) -> Unknown` is not assignable to attribute `publish` on type `Unknown | EventBusService | None`
   --> tests/test_ticket_state_machine.py:258:9
    |
256 |             events.append(event)
257 |
258 |         ticket_workflow_orchestrator.event_bus.publish = mock_publish
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
259 |
260 |         ticket_workflow_orchestrator.transition_status(
    |
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Object of type `def mock_publish(event) -> Unknown` is not assignable to attribute `publish` on type `Unknown | EventBusService | None`
   --> tests/test_ticket_state_machine.py:591:9
    |
589 |             events.append(event)
590 |
591 |         ticket_workflow_orchestrator.event_bus.publish = mock_publish
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
592 |
593 |         ticket_workflow_orchestrator.transition_status(
    |
info: rule `invalid-assignment` is enabled by default

error[invalid-assignment]: Object of type `def mock_publish(event) -> Unknown` is not assignable to attribute `publish` on type `Unknown | EventBusService | None`
   --> tests/test_ticket_state_machine.py:617:9
    |
615 |             events.append(event)
616 |
617 |         ticket_workflow_orchestrator.event_bus.publish = mock_publish
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
618 |
619 |         ticket_workflow_orchestrator.transition_status(
    |
info: rule `invalid-assignment` is enabled by default

error[invalid-argument-type]: Argument to bound method `give_review` is incorrect
   --> tests/test_validation_system.py:912:9
    |
910 |     result1 = validation_orchestrator.give_review(
911 |         task_id=validation_enabled_task.id,
912 |         validator_agent_id=validator_id,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
913 |         validation_passed=False,
914 |         feedback="Missing error handling. Please add try-catch blocks.",
    |
info: Element `None` of this union is not assignable to `str`
info: Method defined here
   --> omoi_os/services/validation_orchestrator.py:398:9
    |
396 |     # -------------------------------------------------------------------------
397 |     
398 |     def give_review(
    |         ^^^^^^^^^^^
399 |         self,
400 |         task_id: str,
401 |         validator_agent_id: str,
    |         ----------------------- Parameter declared here
402 |         validation_passed: bool,
403 |         feedback: str,
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-argument-type]: Argument to bound method `give_review` is incorrect
   --> tests/test_validation_system.py:948:9
    |
946 |     result2 = validation_orchestrator.give_review(
947 |         task_id=validation_enabled_task.id,
948 |         validator_agent_id=validator_id2,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Expected `str`, found `str | None`
949 |         validation_passed=True,
950 |         feedback="All issues resolved. Code is ready.",
    |
info: Element `None` of this union is not assignable to `str`
info: Method defined here
   --> omoi_os/services/validation_orchestrator.py:398:9
    |
396 |     # -------------------------------------------------------------------------
397 |     
398 |     def give_review(
    |         ^^^^^^^^^^^
399 |         self,
400 |         task_id: str,
401 |         validator_agent_id: str,
    |         ----------------------- Parameter declared here
402 |         validation_passed: bool,
403 |         feedback: str,
    |
info: rule `invalid-argument-type` is enabled by default

error[invalid-return-type]: Return type does not match returned value
  --> tests/test_websocket_events.py:16:42
   |
15 | @pytest.fixture
16 | def event_bus_service(redis_url: str) -> EventBusService:
   |                                          ^^^^^^^^^^^^^^^ expected `EventBusService`, found `types.GeneratorType`
17 |     """Create an event bus service (uses fakeredis if available)."""
18 |     try:
   |
info: Function is inferred as returning `types.GeneratorType` because it is a generator function
info: See https://docs.python.org/3/glossary.html#term-generator for more details
info: rule `invalid-return-type` is enabled by default

Found 318 diagnostics
