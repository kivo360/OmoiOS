@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* OmoiOS Warm Cream Theme - Cursor BG Agent Inspired */
    
    /* Background colors */
    --background: 48 20% 96%;        /* #F5F5F0 Warm cream */
    --foreground: 0 0% 10%;          /* #1A1A1A Near black */
    
    /* Card/Surface */
    --card: 0 0% 100%;               /* #FFFFFF White surfaces */
    --card-foreground: 0 0% 10%;     /* #1A1A1A */
    
    /* Popover */
    --popover: 0 0% 100%;            /* #FFFFFF */
    --popover-foreground: 0 0% 10%;  /* #1A1A1A */
    
    /* Primary - Dark accent (not blue) */
    --primary: 0 0% 10%;             /* #1A1A1A */
    --primary-foreground: 48 20% 96%; /* #F5F5F0 */
    
    /* Secondary */
    --secondary: 48 14% 95%;         /* Warm light gray */
    --secondary-foreground: 0 0% 10%; /* #1A1A1A */
    
    /* Muted */
    --muted: 48 14% 95%;             /* Warm light gray */
    --muted-foreground: 0 0% 42%;    /* #6B6B6B Secondary text */
    
    /* Accent */
    --accent: 48 12% 94%;            /* Warm hover state */
    --accent-foreground: 0 0% 10%;   /* #1A1A1A */
    
    /* Destructive - Git red */
    --destructive: 355 70% 47%;      /* #CB2431 */
    --destructive-foreground: 0 0% 98%;
    
    /* Borders */
    --border: 48 12% 90%;            /* #E8E8E3 Warm gray borders */
    --input: 48 12% 90%;             /* #E8E8E3 */
    --ring: 0 0% 10%;                /* #1A1A1A Focus ring */
    
    /* Radius */
    --radius: 0.5rem;
    
    /* Custom semantic colors */
    --success: 133 59% 33%;          /* #22863A Git green */
    --warning: 45 100% 35%;          /* #B08800 Amber */
    --info: 212 97% 43%;             /* #0366D6 Blue */
    
    /* Tertiary text */
    --tertiary: 0 0% 61%;            /* #9B9B9B Placeholder */
    
    /* Chart colors */
    --chart-1: 133 59% 33%;          /* Success green */
    --chart-2: 212 97% 43%;          /* Info blue */
    --chart-3: 45 100% 35%;          /* Warning amber */
    --chart-4: 355 70% 47%;          /* Destructive red */
    --chart-5: 0 0% 42%;             /* Muted gray */
    
    /* Sidebar - Slightly warmer than main */
    --sidebar-background: 48 14% 98%; /* #FAFAF8 */
    --sidebar-foreground: 0 0% 10%;   /* #1A1A1A */
    --sidebar-primary: 0 0% 10%;      /* #1A1A1A */
    --sidebar-primary-foreground: 48 20% 96%;
    --sidebar-accent: 48 12% 94%;     /* Warm hover */
    --sidebar-accent-foreground: 0 0% 10%;
    --sidebar-border: 48 12% 90%;     /* #E8E8E3 */
    --sidebar-ring: 0 0% 10%;         /* #1A1A1A */
  }

  .dark {
    /* OmoiOS Dark Theme - Warm dark tones */
    
    /* Background colors */
    --background: 0 0% 12%;          /* #1E1E1E */
    --foreground: 0 0% 90%;          /* #E5E5E5 */
    
    /* Card/Surface */
    --card: 0 0% 18%;                /* #2D2D2D */
    --card-foreground: 0 0% 90%;     /* #E5E5E5 */
    
    /* Popover */
    --popover: 0 0% 18%;             /* #2D2D2D */
    --popover-foreground: 0 0% 90%;  /* #E5E5E5 */
    
    /* Primary */
    --primary: 0 0% 90%;             /* #E5E5E5 */
    --primary-foreground: 0 0% 12%;  /* #1E1E1E */
    
    /* Secondary */
    --secondary: 0 0% 18%;           /* #2D2D2D */
    --secondary-foreground: 0 0% 90%; /* #E5E5E5 */
    
    /* Muted */
    --muted: 0 0% 18%;               /* #2D2D2D */
    --muted-foreground: 0 0% 55%;    /* #8B8B8B */
    
    /* Accent */
    --accent: 0 0% 20%;              /* Slightly lighter hover */
    --accent-foreground: 0 0% 90%;   /* #E5E5E5 */
    
    /* Destructive */
    --destructive: 355 60% 40%;      /* Darker red for dark mode */
    --destructive-foreground: 0 0% 98%;
    
    /* Borders */
    --border: 0 0% 24%;              /* #3D3D3D */
    --input: 0 0% 24%;               /* #3D3D3D */
    --ring: 0 0% 90%;                /* #E5E5E5 */
    
    /* Custom semantic colors */
    --success: 133 50% 40%;          /* Brighter green for dark */
    --warning: 45 90% 45%;           /* Brighter amber for dark */
    --info: 212 90% 55%;             /* Brighter blue for dark */
    
    /* Tertiary text */
    --tertiary: 0 0% 36%;            /* #5B5B5B */
    
    /* Chart colors - adjusted for dark mode */
    --chart-1: 133 50% 40%;
    --chart-2: 212 90% 55%;
    --chart-3: 45 90% 45%;
    --chart-4: 355 60% 50%;
    --chart-5: 0 0% 55%;
    
    /* Sidebar */
    --sidebar-background: 0 0% 15%;  /* #252525 */
    --sidebar-foreground: 0 0% 90%;  /* #E5E5E5 */
    --sidebar-primary: 0 0% 90%;     /* #E5E5E5 */
    --sidebar-primary-foreground: 0 0% 15%;
    --sidebar-accent: 0 0% 20%;
    --sidebar-accent-foreground: 0 0% 90%;
    --sidebar-border: 0 0% 24%;      /* #3D3D3D */
    --sidebar-ring: 0 0% 90%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

@layer utilities {
  /* Git-style line change colors */
  .text-git-add {
    color: hsl(var(--success));
  }
  .text-git-delete {
    color: hsl(var(--destructive));
  }
  
  /* JetBrains Mono for code/line counts */
  .font-mono-code {
    font-family: 'JetBrains Mono', ui-monospace, monospace;
  }
  
  /* Time group header styling */
  .time-group-header {
    @apply text-[11px] uppercase tracking-wider text-muted-foreground font-medium;
  }
  
  /* Warm hover state */
  .hover-warm {
    @apply hover:bg-accent transition-colors duration-150;
  }
}

/* ==========================================================================
   KaTeX Math Rendering Styles
   ========================================================================== */

/* Base KaTeX styling */
.katex-display {
  @apply my-4 overflow-x-auto overflow-y-hidden;
}

.katex {
  @apply text-base;
  font-size: 1.1em;
}

/* Light mode KaTeX colors */
.katex .mord,
.katex .mrel,
.katex .mbin,
.katex .mopen,
.katex .mclose,
.katex .mpunct,
.katex .minner {
  color: hsl(var(--foreground));
}

/* Dark mode KaTeX colors */
.dark .katex .mord,
.dark .katex .mrel,
.dark .katex .mbin,
.dark .katex .mopen,
.dark .katex .mclose,
.dark .katex .mpunct,
.dark .katex .minner {
  color: hsl(var(--foreground));
}

/* Display math block styling */
.katex-display > .katex {
  @apply text-center;
}

/* Inline math styling */
.katex:not(.katex-display .katex) {
  @apply inline;
}

/* ==========================================================================
   Mermaid Diagram Styles
   ========================================================================== */

/* Mermaid container */
.mermaid {
  @apply flex justify-center items-center w-full;
}

/* SVG styling within mermaid diagrams */
.mermaid svg {
  @apply max-w-full h-auto;
}

/* Dark mode mermaid text visibility */
.dark .mermaid text {
  fill: hsl(var(--foreground)) !important;
}

/* Mermaid node styling */
.dark .mermaid .node rect,
.dark .mermaid .node circle,
.dark .mermaid .node ellipse,
.dark .mermaid .node polygon {
  stroke: hsl(var(--border)) !important;
}

/* Mermaid edge/line styling */
.dark .mermaid .edgePath path {
  stroke: hsl(var(--muted-foreground)) !important;
}

/* Mermaid label styling */
.dark .mermaid .edgeLabel {
  background-color: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
}
